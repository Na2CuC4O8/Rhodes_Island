var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Struc;
(function (Struc) {
    var PointerList = /** @class */ (function () {
        function PointerList(source, initPoint) {
            if (source === void 0) { source = []; }
            if (initPoint === void 0) { initPoint = 0; }
            var _this = this;
            this._list = [];
            this._pointer = 0;
            source.forEach(function (ele) {
                _this._list.push(ele);
            });
        }
        Object.defineProperty(PointerList.prototype, "exceeding", {
            get: function () {
                return this._pointer >= this._list.length || this._pointer < 0;
            },
            enumerable: true,
            configurable: true
        });
        PointerList.prototype.read = function () {
            return this._list[this._pointer];
        };
        PointerList.prototype.step = function () {
            this._pointer += 1;
            return this;
        };
        PointerList.prototype.to = function (place) {
            this._pointer = place;
            return this;
        };
        PointerList.prototype.push = function (data) {
            this._list.push(data);
            return this;
        };
        PointerList.prototype.set = function (index, data) {
            this._list[index] = data;
            return this;
        };
        PointerList.prototype.next = function (shift) {
            if (shift === void 0) { shift = 1; }
            return this._list[this._pointer + shift];
        };
        Object.defineProperty(PointerList.prototype, "length", {
            get: function () {
                return this._list.length;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(PointerList.prototype, "last", {
            get: function () {
                return this._list[this._list.length - 1];
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(PointerList.prototype, "pointer", {
            get: function () {
                return this._pointer;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(PointerList.prototype, "atEnd", {
            get: function () {
                return this._pointer === this._list.length - 1;
            },
            enumerable: true,
            configurable: true
        });
        return PointerList;
    }());
    Struc.PointerList = PointerList;
})(Struc = exports.Struc || (exports.Struc = {}));
},{}],2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */
var GameField_1 = require("./SceneScript/GameField");
var Loading_1 = require("./SceneScript/Loading");
/*
* 游戏初始化配置;
*/
var GameConfig = /** @class */ (function () {
    function GameConfig() {
    }
    GameConfig.init = function () {
        var reg = Laya.ClassUtils.regClass;
        reg("SceneScript/GameField.ts", GameField_1.default);
        reg("SceneScript/Loading.ts", Loading_1.default);
    };
    GameConfig.width = 1400;
    GameConfig.height = 900;
    GameConfig.scaleMode = "noscale";
    GameConfig.screenMode = "none";
    GameConfig.alignV = "top";
    GameConfig.alignH = "left";
    GameConfig.startScene = "LoadingScene.scene";
    GameConfig.sceneRoot = "";
    GameConfig.debug = false;
    GameConfig.stat = false;
    GameConfig.physicsDebug = false;
    GameConfig.exportSceneToJson = true;
    return GameConfig;
}());
exports.default = GameConfig;
GameConfig.init();
},{"./SceneScript/GameField":11,"./SceneScript/Loading":12}],3:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var DataStructure_1 = require("../DataStructure");
var gameSet_URL = "./Database/GameSet.json", enemyDatabase_URL = "./Database/EnemyDatabase.json", operatorDatabase_URL = "./Database/OperatorDatabase.json";
var Database = /** @class */ (function () {
    function Database() {
        this.enemyData = Laya.loader.getRes(enemyDatabase_URL);
        this.operatorData = Laya.loader.getRes(operatorDatabase_URL);
        this.gameSet = Laya.loader.getRes(gameSet_URL);
        this.initTimeTable();
    }
    Database.prototype.initTimeTable = function () {
        var _this = this;
        this.timeTable = new DataStructure_1.Struc.PointerList();
        this.gameSet["timetableBref"].forEach(function (element) {
            var time = element["time"];
            var typeData = _this.enemyData[element["type"]];
            var path = _this.gameSet["paths"][element.path];
            _this.timeTable.push({ time: time, typeData: typeData, path: path });
        });
    };
    Database.prototype.isHappening = function (time) {
        return this.timeTable.read() && time === this.timeTable.read().time;
    };
    Database.prototype.readTimeEvent = function () {
        return this.timeTable.read();
    };
    Database.prototype.readTimeEventDone = function () {
        this.timeTable.step();
    };
    Database.prototype.getPath = function (pathName) {
        return this.gameSet["paths"][pathName];
    };
    Database.prototype.getEnemy = function (enemyName) {
        return this.enemyData[enemyName];
    };
    Database.prototype.getOperator = function (operatorName) {
        return this.operatorData[operatorName];
    };
    Database.prototype.getGround = function () {
        return this.gameSet["ground"];
    };
    return Database;
}());
exports.default = Database;
},{"../DataStructure":1}],4:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var People_1 = require("./Interface/People");
var State_1 = require("./Interface/State");
var Present_1 = require("./Interface/Present");
var DataStructure_1 = require("../DataStructure");
var myMath_1 = require("../myMath");
/**
 * EnemyPresent
 */
var EnemyPresent = /** @class */ (function (_super) {
    __extends(EnemyPresent, _super);
    function EnemyPresent(father, data) {
        return _super.call(this, father, data) || this;
    }
    return EnemyPresent;
}(Present_1.default));
/**
 * EnemeState
 *
 */
var EnemyState = /** @class */ (function (_super) {
    __extends(EnemyState, _super);
    function EnemyState(data, path) {
        var _this = _super.call(this, data) || this;
        _this._xSpeed = 0;
        _this._ySpeed = 0;
        _this._path = new DataStructure_1.Struc.PointerList(path);
        // this._location = this._path.read()
        _this._x = _this._path.read()[0];
        _this._y = _this._path.read()[1];
        _this._speed = data["speed"];
        return _this;
    }
    Object.defineProperty(EnemyState.prototype, "x", {
        get: function () {
            return this._x;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EnemyState.prototype, "y", {
        get: function () {
            return this._y;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EnemyState.prototype, "atLastNode", {
        get: function () {
            return this._path.pointer === this._path.length - 1 &&
                this._x === this._path.last[0] &&
                this._y === this._path.last[1];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EnemyState.prototype, "isArrived", {
        get: function () {
            return this._path.read()[0] === this._x &&
                this._path.read()[1] === this._y;
        },
        enumerable: true,
        configurable: true
    });
    EnemyState.prototype.unitMove = function () {
        this._x = myMath_1.default.moveTo(this._x, this._xSpeed, this._path.read()[0]); //x轴移动
        this._y = myMath_1.default.moveTo(this._y, this._ySpeed, this._path.read()[1]); //y轴移动
    };
    EnemyState.prototype.setAxisSpeed = function () {
        var x_shift = this._path.read()[0] - this._x, //求x轴总距离
        y_shift = this._path.read()[1] - this._y, //求y轴总距离
        hypotenuse = Math.sqrt(Math.pow(x_shift, 2) + Math.pow(y_shift, 2)); //求直线总距离
        this._xSpeed = x_shift * this._speed / hypotenuse; //设置x轴速度
        this._ySpeed = y_shift * this._speed / hypotenuse; //设置y轴速度
    };
    EnemyState.prototype.nextAim = function () {
        this._path.step();
    };
    return EnemyState;
}(State_1.default));
/**
 * People
 *
 *
 *
 *
 *
 */
var Enemy = /** @class */ (function (_super) {
    __extends(Enemy, _super);
    function Enemy(upperPath, father, enemyData, path, database) {
        var _this = _super.call(this) || this;
        _this._upperPath = upperPath;
        _this._data = enemyData;
        _this._present = new EnemyPresent(father, _this._data);
        _this._present.setSize(database.getGround()["size"]);
        // this._present.setPos(0,0)
        _this._state = new EnemyState(_this._data, path);
        console.log("已新建敌人");
        console.log(_this);
        console.log("已新建敌人");
        return _this;
    }
    Enemy.prototype.update = function () {
        this.move();
    };
    Enemy.prototype.move = function () {
        /**
         * 函数说明
         * https://www.lucidchart.com/documents/view/96582305-ec6e-4c41-b178-aa78f91ce0d2/0
         */
        if (this._state.atLastNode) { //如果已到达终点
            this.move = function () { }; //则清空move函数
            return;
        }
        if (this._state.isArrived) { //如果已到达下一个节点
            this._state.nextAim(); //重设节点
            this._state.setAxisSpeed(); //计算速度
        }
        this._state.unitMove(); //进行一次移动
        this._present.setPos(this._state.x, this._state.y); //改变元素位置
    };
    return Enemy;
}(People_1.default));
exports.default = Enemy;
// export default class Enemy extends basic.People{
//     constructor(father:Laya.Sprite,upperPath:GameField,data:any,path:number[][]){
//         super()
//         this.state.init(data,path)
//         this.present.init(father, "Basic/There-2.png", 0,0)
//         // this.state.speed = 5
//         // this.state.setAxisSpeed()
//         this.update = ()=>{
//             // this.state.updatePosition()
//             // this.present.setPosition(this.state.position)
//             // this.state.isArrived() && this.state.nextAim()
//         }
//         Laya.timer.once(2000,this,console.log,[this])
//     }
// }
/*
export default class Enemy extends basic.People{
    public speed:number = 0.4       //速度
    public CentreShift:number = 35  //与Ground.Grids.size的一半保持一致，稍后改为变量
    private hitDoctor:number = 1    //进门之后打刀客他多少血
    // public path:number[][] = [
    //     [0,0],
    //     [100,100],
    //     [0,0]
    // ]
    
    public path:number[][] = []     //路径对象
    public father:Laya.Sprite       //原点坐标对象
    private place:Grids             //地图方格对象
    private upperPath:GameField     //含有此实例的实例

    constructor(father:Laya.Sprite, place:Grids, upperPath:GameField){
        super()
        // alert(1)
        this.upperPath = upperPath
        this.father = father
        this.place = place
        this.state.ele = Laya.Sprite.fromImage("Basic/There.png")
        // alert(2)

        // const start:number[] = this.path.shift()
        this.state.ele.pos(0,0).size(30,30)
        father.addChild(this.state.ele)

        this.SetPath()
        this.move()
    }

    private SetPath(){
        const points:number[][] = [
            [0,0],
            [0,5],
            [5,5],
            [5,3],
            [3,3],
            [3,0],
            [5,0],
            [5,9]
        ]
        points.forEach((ele)=>{
            // console.log(this.upperPath)
            const rec:Laya.Rectangle = this.upperPath.grids.RecMap[ele[0]][ele[1]]
            const current:number[] = [
                rec.x,
                rec.y
            ]
            this.path.push(current)
        })
    }

    private move(){
        const target:number[] = this.path.shift()
        if (target === undefined){
            this.goal()
            return
        }
        const {x,y} = this.state.ele
        const hypotenuse:number = Math.sqrt(Math.pow(x-target[0],2)+Math.pow(y-target[1],2))
        const time:number = Math.floor(hypotenuse/this.speed)
        const tween:Laya.Tween = Laya.Tween.to(this.state.ele, {x:target[0],y:target[1]}, time, null,
            Laya.Handler.create(this,this.move),100)

    }
    

    private goal(){
        this.upperPath.doctor.damaged(this.hitDoctor)
    }
}
*/ 
},{"../DataStructure":1,"../myMath":13,"./Interface/People":6,"./Interface/Present":7,"./Interface/State":8}],5:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Grids = /** @class */ (function () {
    function Grids(upperPath, father, database) {
        this.spriteGroup = [];
        this.rectGroup = [];
        this.upperPath = upperPath;
        this.father = father;
        this.database = database;
        //创建游戏场地: Start
        var ground = database.getGround(), width = ground["width"], height = ground["height"], size = ground["size"], matrix = ground["matrix"];
        for (var x = 0; x < width; x += 1) {
            this.spriteGroup[x] = [];
            this.rectGroup[x] = [];
            for (var y = 0; y < height; y += 1) {
                //创建sprite: Start
                var sprite = Laya.Sprite.fromImage("Basic/Rec.png");
                sprite.pos(x * size, y * size).size(size, size);
                father.addChild(sprite);
                this.spriteGroup[x][y] = sprite;
                //创建Sprite: End
                //创建Rectangle: Start
                var rect = new Laya.Rectangle(x * size, y * size, size, size);
                this.rectGroup[x][y] = rect;
                //创建Rectangle: End
            }
        }
        //创建游戏场地: End
        console.log("Grids对象创建完成");
        console.log(this);
        console.log("Grids对象创建完成");
    }
    return Grids;
}());
exports.Grids = Grids;
// export class Grids{
//     public Map:Array<Array<Laya.Sprite>> = []
//     public RecMap:Array<Array<Laya.Rectangle>> = []
//     private static size:number = 90
//     private father:Laya.Sprite
//     private upperPath:GameField
//     private data:JSON
//     //old
//     //new
//     private database:Database
//     constructor(father:Laya.Sprite, upperPath:GameField, database:Database){
//         this.database = database
//         // this.father = father
//         // this.upperPath = upperPath
//         // this.data = data
//         // let cols = data["ground"]["width"],
//         // raws = data["ground"]["height"]
//         // for (let n = 0; n < raws; n += 1) {
//         //     this.Map[n] = []
//         //     this.RecMap[n] = []
//         //     for (let m = 0; m < cols; m += 1) {
//         //         this.initElement(n,m)
//         //     }
//         // }
//         // console.log(this.RecMap)
//     }
//     initElement(raw:number,count:number){
//         const current:Laya.Sprite = Laya.Sprite.fromImage("Basic/Rec.png");//载入图片
//         current.pos(Grids.size*count, Grids.size*raw)
//             .size(Grids.size,Grids.size)//依据static size属性改变大小、依据编号改变位置
//         current.name = `grid${raw}-${count}`//重命名为 grid行数-列数
//         this.Map[raw][count] = current
//         this.RecMap[raw][count] = new Laya.Rectangle(current.x,current.y,Grids.size,Grids.size)
//         // current.on(Laya.Event.CLICK, this.upperPath, this.upperPath.addOperator, [this.getPlace(count,raw)])//设定鼠标点击事件
//         //向GameField中添加Operator实例
//         this.father.addChild(current)
//     }
//     getPlace(count:number,raw:number):number[]{
//         //raw:第几行
//         //count:第几个
//         return [
//             this.RecMap[raw][count].x,
//             this.RecMap[raw][count].y
//         ]
//     }
// }
},{}],6:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var People = /** @class */ (function () {
    function People() {
    }
    return People;
}());
exports.default = People;
},{}],7:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Present：表现类
 */
var Present = /** @class */ (function () {
    function Present(father, data) {
        this._sprite = Laya.Sprite.fromImage(data["img"]);
        this._father = father;
        this._father.addChild(this._sprite);
    }
    Present.prototype.setSize = function (size) {
        this._sprite.size(size, size);
    };
    Present.prototype.setPos = function (x, y) {
        this._sprite.pos(x, y);
    };
    return Present;
}());
exports.default = Present;
},{}],8:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var State = /** @class */ (function () {
    function State(data) {
    }
    return State;
}());
exports.default = State;
},{}],9:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var SideOperator = /** @class */ (function () {
    function SideOperator(upperPath, father, data) {
        this._upperPath = upperPath;
        this._father = father;
        this._data = data;
        this._unit = Laya.Sprite.fromImage(data["img"]);
        father.addChild(this._unit);
    }
    SideOperator.prototype.size = function (width, height) {
        this._unit.size(width, height);
    };
    SideOperator.prototype.pos = function (x, y) {
        this._unit.pos(x, y);
    };
    Object.defineProperty(SideOperator.prototype, "sprite", {
        get: function () {
            return this._unit;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SideOperator.prototype, "data", {
        get: function () {
            return this._data;
        },
        enumerable: true,
        configurable: true
    });
    return SideOperator;
}());
var SideField = /** @class */ (function () {
    function SideField(upperPath, father, list, database) {
        // private _operatorList:string[]
        this._sideOperators = [];
        this._upperPath = upperPath;
        this._father = father;
        // this._operatorList = list
        this._database = database;
        this._frame = Laya.Sprite.fromImage("Basic/Rec.png");
        var ground = database.getGround();
        this._frame.size(100, ground["size"] * ground["height"]).pos(ground["size"] * ground["width"], 0);
        this._father.addChild(this._frame);
        this.initSide(list);
        console.log(this);
    }
    SideField.prototype.initSide = function (list) {
        var _this = this;
        list.forEach(function (ele, index) {
            var data = _this._database.getOperator(ele);
            console.log(data);
            var currentSide = new SideOperator(_this, _this._frame, data);
            currentSide.pos(0, index * 100);
            currentSide.size(100, 100);
            _this._sideOperators.push(currentSide);
        });
        this.initSide = function () { };
    };
    Object.defineProperty(SideField.prototype, "sideSprites", {
        get: function () {
            var result = [];
            this._sideOperators.forEach(function (ele) {
                result.push(ele.sprite);
            });
            return result;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SideField.prototype, "sideData", {
        get: function () {
            var result = [];
            this._sideOperators.forEach(function (ele) {
                result.push(ele.data);
            });
            return result;
        },
        enumerable: true,
        configurable: true
    });
    return SideField;
}());
exports.default = SideField;
},{}],10:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var GameConfig_1 = require("./GameConfig");
var Main = /** @class */ (function () {
    function Main() {
        //根据IDE设置初始化引擎		
        if (window["Laya3D"])
            Laya3D.init(GameConfig_1.default.width, GameConfig_1.default.height);
        else
            Laya.init(GameConfig_1.default.width, GameConfig_1.default.height, Laya["WebGL"]);
        Laya["Physics"] && Laya["Physics"].enable();
        Laya["DebugPanel"] && Laya["DebugPanel"].enable();
        Laya.stage.scaleMode = GameConfig_1.default.scaleMode;
        Laya.stage.screenMode = GameConfig_1.default.screenMode;
        //兼容微信不支持加载scene后缀场景
        Laya.URL.exportSceneToJson = GameConfig_1.default.exportSceneToJson;
        //打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）
        if (GameConfig_1.default.debug || Laya.Utils.getQueryString("debug") == "true")
            Laya.enableDebugPanel();
        if (GameConfig_1.default.physicsDebug && Laya["PhysicsDebugDraw"])
            Laya["PhysicsDebugDraw"].enable();
        if (GameConfig_1.default.stat)
            Laya.Stat.show();
        Laya.alertGlobalError = true;
        //激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程
        Laya.ResourceVersion.enable("version.json", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);
    }
    Main.prototype.onVersionLoaded = function () {
        //激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图
        Laya.AtlasInfoManager.enable("fileconfig.json", Laya.Handler.create(this, this.onConfigLoaded));
    };
    Main.prototype.onConfigLoaded = function () {
        //加载IDE指定的场景
        GameConfig_1.default.startScene && Laya.Scene.open(GameConfig_1.default.startScene);
    };
    return Main;
}());
//激活启动类
new Main();
},{"./GameConfig":2}],11:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var layaMaxUI_1 = require("../ui/layaMaxUI");
var Enemy_1 = require("../GameObj/Enemy");
var Grids_1 = require("../GameObj/Grids");
var Database_1 = require("../GameObj/Database");
// import GameEventManager from "../GameObj/GameEvent";
var SideField_1 = require("../GameObj/SideField");
var log = console.log;
var GameEventManager = /** @class */ (function () {
    function GameEventManager(upperpath) {
        this.upperPath = upperpath;
        this.database = upperpath._database;
        this.init_dragFromSide();
    }
    GameEventManager.prototype.init_dragFromSide = function () {
        this.upperPath.sideField;
    };
    return GameEventManager;
}());
var GameField = /** @class */ (function (_super) {
    __extends(GameField, _super);
    function GameField() {
        var _this = _super.call(this) || this;
        _this._enemies = [];
        _this._operators = [];
        _this._time_frame = 0;
        _this._database = new Database_1.default();
        _this._grids = new Grids_1.Grids(_this, _this.UISet, _this._database);
        _this.sideField = new SideField_1.default(_this, _this.UISet, ["bird", "sb", "bird"], _this._database); //参数["bird"]将在选人功能完成后改为变量
        // this._gameEventManager = new GameEventManager(this)
        _this.init_sideEvent();
        Laya.timer.loop(20, _this, _this.toLoop);
        return _this;
    }
    GameField.prototype.toLoop = function () {
        while (this._database.isHappening(this._time_frame)) {
            this._enemies.push(new Enemy_1.default(this, this.UISet, this._database.readTimeEvent().typeData, this._database.readTimeEvent().path, this._database));
            this._database.readTimeEventDone();
        }
        this._enemies.forEach(function (ele) {
            ele.update();
        });
        this._time_frame += 1;
    };
    GameField.prototype.init_sideEvent = function () {
        var _this = this;
        var toBuildEvents = this.sideField.sideSprites;
        var data = this.sideField.sideData;
        toBuildEvents.forEach(function (ele, index) {
            ele.on(Laya.Event.MOUSE_DOWN, _this, _this.onDrag, [data[index]]);
        });
    };
    GameField.prototype.onDrag = function (data) {
        var _this = this;
        var spr = Laya.Sprite.fromImage(data["img"]);
        spr.size(this._database.getGround()["size"], this._database.getGround()["size"]);
        this.UISet.addChild(spr);
        var draging = function () {
            spr.pos(_this.UISet.mouseX, _this.UISet.mouseY);
        };
        Laya.timer.loop(10, this, draging);
        this.stage.on(Laya.Event.MOUSE_UP, this, function () { Laya.timer.clear(_this, draging); });
    };
    return GameField;
}(layaMaxUI_1.ui.GameFieldSceneUI));
exports.default = GameField;
// export default class GameField extends ui.GameFieldSceneUI{
//     /**
//      * sb
//      */
//     public grids:Grids
//     public doctor:Doctor
//     public operators:Array<Operator> = []
//     public enemies:Array<Enemy> = []
//     private onKeydown:Function
//     public GameSet:JSON
//     public EnemyDatabase:JSON
//     public TimeTable:Struc.PointerList<timeNode>
//     private time:number
//     // public frameLoop:Laya.timer
//     constructor(){
//         super()
//         this
//         Laya.loader.load([gameSet_json, enemyDatabase], Laya.Handler.create(this, this.onLoaded),null,Laya.Loader.JSON)
//         //加载敌人数据库
//         //加载地图  
//     }
//     private onLoaded(){//加载完成后执行此函数
//         this.GameSet = Laya.loader.getRes(gameSet_json)//获取已加载的地图
//         this.EnemyDatabase = Laya.loader.getRes(enemyDatabase)//获取已加载的敌人数据
//         this.initTimeTable()//从地图数据中加载时间表
//         this.time = 0//将时间设为0;时间单位为帧
//         this.grids = new Grids(this.UISet,this,this.GameSet)//依据已加载的地图数据，设置地图
//         this.doctor = new Doctor()//初始化刀客他对象
//         this.keyBoardEventSetup()//初始化键盘事件
//         /**测试代码 */
//         // this.enemies.push(new Enemy(this.UISet, this, "bug0", []))
//         /**测试代码End */
//         Laya.timer.loop(20,this,this.frameLoop)//开启游戏帧循环
//     }
//     private initTimeTable(){
//         this.TimeTable = new Struc.PointerList<timeNode>()
//         const rawTable:Array<any> = this.GameSet["timetable"]
//         rawTable.forEach((ele)=>{
//             this.TimeTable.push({
//                 time:ele.time,
//                 type:this.EnemyDatabase[ele.type],
//                 path:this.GameSet["paths"][ele.path]
//             })
//         })
//         log(this.TimeTable)
//     }
//     private keyBoardEventSetup(){
//         this.onKeydown = (e:Laya.Event) => {
//             /**测试代码 */
//             if (e.keyCode === Laya.Keyboard.E) {
//                 console.log(this.enemies)
//             }
//             if (e.keyCode === Laya.Keyboard.F) {
//                 console.log(this.enemies[0])
//             }
//             /**测试代码End */
//         }
//         Laya.stage.on(Laya.Event.KEY_DOWN,this,this.onKeydown)
//     }
//     public frameLoop(){//每帧都会执行的代码块
//         if (this.TimeTable.read() && this.time === this.TimeTable.read().time) {
//             this.enemies.push(new Enemy(this.UISet,this,
//                 this.TimeTable.read().type,
//                 this.TimeTable.read().path))
//             this.TimeTable.step()
//         }
//         this.operators.forEach((ele)=>{//执行所有干员对象的update方法
//             ele.update()
//         })
//         this.enemies.forEach((ele)=>{//执行所有敌人对象的update方法
//             ele.update()
//         })
//         this.time ++
//     }
//     addOperator(place:number[]){//在地图上添加干员
//         //此方法被作为回调函数提供给this.grids对象，在点击地图空格时执行
//         this.operators.push(new Operator(this,place))
//     }
// }
},{"../GameObj/Database":3,"../GameObj/Enemy":4,"../GameObj/Grids":5,"../GameObj/SideField":9,"../ui/layaMaxUI":14}],12:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var layaMaxUI_1 = require("../ui/layaMaxUI");
var Loading = /** @class */ (function (_super) {
    __extends(Loading, _super);
    function Loading() {
        var _this = _super.call(this) || this;
        var gameSet = "./Database/GameSet.json", enemyDatabase = "./Database/EnemyDatabase.json", operatorDatabase = "./Database/OperatorDatabase.json";
        Laya.loader.load([gameSet, enemyDatabase, operatorDatabase], Laya.Handler.create(_this, _this.onLoaded), null, Laya.Loader.JSON);
        return _this;
    }
    Loading.prototype.onLoaded = function () {
        Laya.Scene.open("GameFieldScene.scene");
        // console.log(Laya.loader)
    };
    return Loading;
}(layaMaxUI_1.ui.LoadingSceneUI));
exports.default = Loading;
},{"../ui/layaMaxUI":14}],13:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var MyMath = /** @class */ (function () {
    function MyMath() {
    }
    MyMath.moveTo = function (front, shift, end) {
        if (shift === 0) {
            return front;
        }
        return shift > 0 ?
            ((front + shift) > end ? end : front + shift) :
            ((front + shift) < end ? end : front + shift);
    };
    return MyMath;
}());
exports.default = MyMath;
},{}],14:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Scene = Laya.Scene;
var REG = Laya.ClassUtils.regClass;
var ui;
(function (ui) {
    var GameFieldSceneUI = /** @class */ (function (_super) {
        __extends(GameFieldSceneUI, _super);
        function GameFieldSceneUI() {
            return _super.call(this) || this;
        }
        GameFieldSceneUI.prototype.createChildren = function () {
            _super.prototype.createChildren.call(this);
            this.loadScene("GameFieldScene");
        };
        return GameFieldSceneUI;
    }(Scene));
    ui.GameFieldSceneUI = GameFieldSceneUI;
    REG("ui.GameFieldSceneUI", GameFieldSceneUI);
    var LoadingSceneUI = /** @class */ (function (_super) {
        __extends(LoadingSceneUI, _super);
        function LoadingSceneUI() {
            return _super.call(this) || this;
        }
        LoadingSceneUI.prototype.createChildren = function () {
            _super.prototype.createChildren.call(this);
            this.loadScene("LoadingScene");
        };
        return LoadingSceneUI;
    }(Scene));
    ui.LoadingSceneUI = LoadingSceneUI;
    REG("ui.LoadingSceneUI", LoadingSceneUI);
})(ui = exports.ui || (exports.ui = {}));
},{}]},{},[10])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xheWEvTGF5YUFpcklERS9yZXNvdXJjZXMvYXBwL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvRGF0YVN0cnVjdHVyZS50cyIsInNyYy9HYW1lQ29uZmlnLnRzIiwic3JjL0dhbWVPYmovRGF0YWJhc2UudHMiLCJzcmMvR2FtZU9iai9FbmVteS50cyIsInNyYy9HYW1lT2JqL0dyaWRzLnRzIiwic3JjL0dhbWVPYmovSW50ZXJmYWNlL1Blb3BsZS50cyIsInNyYy9HYW1lT2JqL0ludGVyZmFjZS9QcmVzZW50LnRzIiwic3JjL0dhbWVPYmovSW50ZXJmYWNlL1N0YXRlLnRzIiwic3JjL0dhbWVPYmovU2lkZUZpZWxkLnRzIiwic3JjL01haW4udHMiLCJzcmMvU2NlbmVTY3JpcHQvR2FtZUZpZWxkLnRzIiwic3JjL1NjZW5lU2NyaXB0L0xvYWRpbmcudHMiLCJzcmMvbXlNYXRoLnRzIiwic3JjL3VpL2xheWFNYXhVSS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNUQSxJQUFjLEtBQUssQ0E0RGxCO0FBNURELFdBQWMsS0FBSztJQUdmO1FBR0kscUJBQVksTUFBb0IsRUFBRSxTQUFvQjtZQUExQyx1QkFBQSxFQUFBLFdBQW9CO1lBQUUsMEJBQUEsRUFBQSxhQUFvQjtZQUF0RCxpQkFJQztZQU5PLFVBQUssR0FBWSxFQUFFLENBQUE7WUFDbkIsYUFBUSxHQUFVLENBQUMsQ0FBQTtZQUV2QixNQUFNLENBQUMsT0FBTyxDQUFDLFVBQUMsR0FBRztnQkFDZixLQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQTtZQUN4QixDQUFDLENBQUMsQ0FBQTtRQUNOLENBQUM7UUFFRCxzQkFBSSxrQ0FBUztpQkFBYjtnQkFDSSxPQUFPLElBQUksQ0FBQyxRQUFRLElBQUksSUFBSSxDQUFD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QixJQUFJLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQ25DLENBQUM7UUFDTCxxQkFBQztJQUFELENBTkEsQUFNQyxDQU5tQyxLQUFLLEdBTXhDO0lBTlksaUJBQWMsaUJBTTFCLENBQUE7SUFDRCxHQUFHLENBQUMsbUJBQW1CLEVBQUMsY0FBYyxDQUFDLENBQUM7QUFDNUMsQ0FBQyxFQWxCYSxFQUFFLEdBQUYsVUFBRSxLQUFGLFVBQUUsUUFrQmYiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG4oZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiXHJcbmV4cG9ydCBtb2R1bGUgU3RydWN7XHJcbiAgICBcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgUG9pbnRlckxpc3Q8RT57XHJcbiAgICAgICAgcHJpdmF0ZSBfbGlzdDpBcnJheTxFPiA9IFtdXHJcbiAgICAgICAgcHJpdmF0ZSBfcG9pbnRlcjpudW1iZXIgPSAwXHJcbiAgICAgICAgY29uc3RydWN0b3Ioc291cmNlOkFycmF5PEU+ID0gW10sIGluaXRQb2ludDpudW1iZXIgPSAwKXtcclxuICAgICAgICAgICAgc291cmNlLmZvckVhY2goKGVsZSk9PntcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xpc3QucHVzaChlbGUpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBnZXQgZXhjZWVkaW5nKCk6Ym9vbGVhbntcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3BvaW50ZXIgPj0gdGhpcy5fbGlzdC5sZW5ndGggfHwgdGhpcy5fcG9pbnRlciA8IDBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlYWQoKTpFe1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbGlzdFt0aGlzLl9wb2ludGVyXVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RlcCgpOlBvaW50ZXJMaXN0PEU+e1xyXG4gICAgICAgICAgICB0aGlzLl9wb2ludGVyKz0xXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0byhwbGFjZTpudW1iZXIpOlBvaW50ZXJMaXN0PEU+e1xyXG4gICAgICAgICAgICB0aGlzLl9wb2ludGVyID0gcGxhY2VcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXNcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1c2goZGF0YTpFKTpQb2ludGVyTGlzdDxFPntcclxuICAgICAgICAgICAgdGhpcy5fbGlzdC5wdXNoKGRhdGEpXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZXQoaW5kZXg6bnVtYmVyLGRhdGE6RSk6UG9pbnRlckxpc3Q8RT57XHJcbiAgICAgICAgICAgIHRoaXMuX2xpc3RbaW5kZXhdID0gZGF0YVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpc1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBuZXh0KHNoaWZ0Om51bWJlciA9IDEpOkV7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9saXN0W3RoaXMuX3BvaW50ZXIrc2hpZnRdXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBnZXQgbGVuZ3RoKCk6bnVtYmVye1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbGlzdC5sZW5ndGhcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGdldCBsYXN0KCk6RXtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xpc3RbdGhpcy5fbGlzdC5sZW5ndGgtMV1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGdldCBwb2ludGVyKCk6bnVtYmVye1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcG9pbnRlclxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZ2V0IGF0RW5kKCk6Ym9vbGVhbntcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3BvaW50ZXIgPT09IHRoaXMuX2xpc3QubGVuZ3RoIC0gMVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsIi8qKlRoaXMgY2xhc3MgaXMgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgYnkgTGF5YUFpcklERSwgcGxlYXNlIGRvIG5vdCBtYWtlIGFueSBtb2RpZmljYXRpb25zLiAqL1xyXG5pbXBvcnQgR2FtZUZpZWxkIGZyb20gXCIuL1NjZW5lU2NyaXB0L0dhbWVGaWVsZFwiXG5pbXBvcnQgTG9hZGluZyBmcm9tIFwiLi9TY2VuZVNjcmlwdC9Mb2FkaW5nXCJcclxuLypcclxuKiDmuLjmiI/liJ3lp4vljJbphY3nva47XHJcbiovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVDb25maWd7XHJcbiAgICBzdGF0aWMgd2lkdGg6bnVtYmVyPTE0MDA7XHJcbiAgICBzdGF0aWMgaGVpZ2h0Om51bWJlcj05MDA7XHJcbiAgICBzdGF0aWMgc2NhbGVNb2RlOnN0cmluZz1cIm5vc2NhbGVcIjtcclxuICAgIHN0YXRpYyBzY3JlZW5Nb2RlOnN0cmluZz1cIm5vbmVcIjtcclxuICAgIHN0YXRpYyBhbGlnblY6c3RyaW5nPVwidG9wXCI7XHJcbiAgICBzdGF0aWMgYWxpZ25IOnN0cmluZz1cImxlZnRcIjtcclxuICAgIHN0YXRpYyBzdGFydFNjZW5lOmFueT1cIkxvYWRpbmdTY2VuZS5zY2VuZVwiO1xyXG4gICAgc3RhdGljIHNjZW5lUm9vdDpzdHJpbmc9XCJcIjtcclxuICAgIHN0YXRpYyBkZWJ1Zzpib29sZWFuPWZhbHNlO1xyXG4gICAgc3RhdGljIHN0YXQ6Ym9vbGVhbj1mYWxzZTtcclxuICAgIHN0YXRpYyBwaHlzaWNzRGVidWc6Ym9vbGVhbj1mYWxzZTtcclxuICAgIHN0YXRpYyBleHBvcnRTY2VuZVRvSnNvbjpib29sZWFuPXRydWU7XHJcbiAgICBjb25zdHJ1Y3Rvcigpe31cclxuICAgIHN0YXRpYyBpbml0KCl7XHJcbiAgICAgICAgdmFyIHJlZzogRnVuY3Rpb24gPSBMYXlhLkNsYXNzVXRpbHMucmVnQ2xhc3M7XHJcbiAgICAgICAgcmVnKFwiU2NlbmVTY3JpcHQvR2FtZUZpZWxkLnRzXCIsR2FtZUZpZWxkKTtcbiAgICAgICAgcmVnKFwiU2NlbmVTY3JpcHQvTG9hZGluZy50c1wiLExvYWRpbmcpO1xyXG4gICAgfVxyXG59XHJcbkdhbWVDb25maWcuaW5pdCgpOyIsImltcG9ydCB7U3RydWN9IGZyb20gXCIuLi9EYXRhU3RydWN0dXJlXCJcclxuXHJcblxyXG5jb25zdCBnYW1lU2V0X1VSTDpzdHJpbmcgPSBcIi4vRGF0YWJhc2UvR2FtZVNldC5qc29uXCIsXHJcbmVuZW15RGF0YWJhc2VfVVJMOnN0cmluZyA9IFwiLi9EYXRhYmFzZS9FbmVteURhdGFiYXNlLmpzb25cIixcclxub3BlcmF0b3JEYXRhYmFzZV9VUkw6c3RyaW5nID0gXCIuL0RhdGFiYXNlL09wZXJhdG9yRGF0YWJhc2UuanNvblwiXHJcblxyXG5cclxuXHJcblxyXG50eXBlIEVuZW15RXZlbnQgPSB7XHJcbiAgICB0aW1lOm51bWJlcixcclxuICAgIHR5cGVEYXRhOmFueSxcclxuICAgIHBhdGg6bnVtYmVyW11bXVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEYXRhYmFzZXtcclxuICAgIHByaXZhdGUgZW5lbXlEYXRhOkpTT05cclxuICAgIHByaXZhdGUgb3BlcmF0b3JEYXRhOkpTT05cclxuICAgIHByaXZhdGUgZ2FtZVNldDpKU09OXHJcblxyXG4gICAgcHJpdmF0ZSB0aW1lVGFibGU6U3RydWMuUG9pbnRlckxpc3Q8RW5lbXlFdmVudD5cclxuICAgIGNvbnN0cnVjdG9yKCl7XHJcbiAgICAgICAgdGhpcy5lbmVteURhdGEgPSBMYXlhLmxvYWRlci5nZXRSZXMoZW5lbXlEYXRhYmFzZV9VUkwpXHJcbiAgICAgICAgdGhpcy5vcGVyYXRvckRhdGEgPSBMYXlhLmxvYWRlci5nZXRSZXMob3BlcmF0b3JEYXRhYmFzZV9VUkwpXHJcbiAgICAgICAgdGhpcy5nYW1lU2V0ID0gTGF5YS5sb2FkZXIuZ2V0UmVzKGdhbWVTZXRfVVJMKVxyXG4gICAgICAgIHRoaXMuaW5pdFRpbWVUYWJsZSgpXHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgaW5pdFRpbWVUYWJsZSgpe1xyXG4gICAgICAgIHRoaXMudGltZVRhYmxlID0gbmV3IFN0cnVjLlBvaW50ZXJMaXN0PEVuZW15RXZlbnQ+KClcclxuICAgICAgICB0aGlzLmdhbWVTZXRbXCJ0aW1ldGFibGVCcmVmXCJdLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRpbWU6bnVtYmVyID0gZWxlbWVudFtcInRpbWVcIl1cclxuICAgICAgICAgICAgY29uc3QgdHlwZURhdGE6YW55ID0gdGhpcy5lbmVteURhdGFbZWxlbWVudFtcInR5cGVcIl1dXHJcbiAgICAgICAgICAgIGNvbnN0IHBhdGg6bnVtYmVyW11bXSA9IHRoaXMuZ2FtZVNldFtcInBhdGhzXCJdW2VsZW1lbnQucGF0aF1cclxuICAgICAgICAgICAgdGhpcy50aW1lVGFibGUucHVzaCh7dGltZSx0eXBlRGF0YSxwYXRofSlcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG5cclxuXHJcbiAgICBwdWJsaWMgaXNIYXBwZW5pbmcodGltZTpudW1iZXIpOmJvb2xlYW57XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZVRhYmxlLnJlYWQoKSAmJiB0aW1lID09PSB0aGlzLnRpbWVUYWJsZS5yZWFkKCkudGltZVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZWFkVGltZUV2ZW50KCk6RW5lbXlFdmVudHtcclxuICAgICAgICByZXR1cm4gdGhpcy50aW1lVGFibGUucmVhZCgpXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlYWRUaW1lRXZlbnREb25lKCk6dm9pZHtcclxuICAgICAgICB0aGlzLnRpbWVUYWJsZS5zdGVwKClcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0UGF0aChwYXRoTmFtZTpzdHJpbmcpOm51bWJlcltdW117XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2FtZVNldFtcInBhdGhzXCJdW3BhdGhOYW1lXVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRFbmVteShlbmVteU5hbWU6c3RyaW5nKTphbnl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5lbXlEYXRhW2VuZW15TmFtZV1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0T3BlcmF0b3Iob3BlcmF0b3JOYW1lOnN0cmluZyk6YW55e1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9wZXJhdG9yRGF0YVtvcGVyYXRvck5hbWVdXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEdyb3VuZCgpOmFueXtcclxuICAgICAgICByZXR1cm4gdGhpcy5nYW1lU2V0W1wiZ3JvdW5kXCJdXHJcbiAgICB9XHJcblxyXG59IiwiaW1wb3J0IHtiYXNpY30gZnJvbSBcIi4vUGVvcGxlXCJcclxuaW1wb3J0IHtHcmlkc30gZnJvbSBcIi4vR3JpZHNcIlxyXG5pbXBvcnQgR2FtZUZpZWxkIGZyb20gXCIuLi9TY2VuZVNjcmlwdC9HYW1lRmllbGRcIlxyXG5pbXBvcnQgRGF0YWJhc2UgZnJvbSBcIi4vRGF0YWJhc2VcIjtcclxuaW1wb3J0IFBlb3BsZSBmcm9tIFwiLi9JbnRlcmZhY2UvUGVvcGxlXCI7XHJcbmltcG9ydCBTdGF0ZSBmcm9tIFwiLi9JbnRlcmZhY2UvU3RhdGVcIjtcclxuaW1wb3J0IFByZXNlbnQgZnJvbSBcIi4vSW50ZXJmYWNlL1ByZXNlbnRcIjtcclxuaW1wb3J0IHtTdHJ1Y30gZnJvbSBcIi4uL0RhdGFTdHJ1Y3R1cmVcIlxyXG5pbXBvcnQgTXlNYXRoIGZyb20gXCIuLi9teU1hdGhcIjtcclxuXHJcbi8qKlxyXG4gKiBFbmVteVByZXNlbnRcclxuICovXHJcblxyXG5jbGFzcyBFbmVteVByZXNlbnQgZXh0ZW5kcyBQcmVzZW50e1xyXG4gICAgY29uc3RydWN0b3IoZmF0aGVyOkxheWEuU3ByaXRlLCBkYXRhOmFueSl7XHJcbiAgICAgICAgc3VwZXIoZmF0aGVyLCBkYXRhKVxyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogRW5lbWVTdGF0ZVxyXG4gKiBcclxuICovXHJcblxyXG5jbGFzcyBFbmVteVN0YXRlIGV4dGVuZHMgU3RhdGV7XHJcbiAgICBwcml2YXRlIF9wYXRoOlN0cnVjLlBvaW50ZXJMaXN0PG51bWJlcltdPlxyXG4gICAgLy8gcHJpdmF0ZSBfbG9jYXRpb246bnVtYmVyW11cclxuICAgIHByaXZhdGUgX3g6bnVtYmVyXHJcbiAgICBwcml2YXRlIF95Om51bWJlclxyXG4gICAgcHJpdmF0ZSBfc3BlZWQ6bnVtYmVyXHJcbiAgICBwcml2YXRlIF94U3BlZWQ6bnVtYmVyID0gMFxyXG4gICAgcHJpdmF0ZSBfeVNwZWVkOm51bWJlciA9IDBcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhOmFueSwgcGF0aDpudW1iZXJbXVtdKXtcclxuICAgICAgICBzdXBlcihkYXRhKVxyXG4gICAgICAgIHRoaXMuX3BhdGggPSBuZXcgU3RydWMuUG9pbnRlckxpc3Q8bnVtYmVyW10+KHBhdGgpXHJcbiAgICAgICAgLy8gdGhpcy5fbG9jYXRpb24gPSB0aGlzLl9wYXRoLnJlYWQoKVxyXG4gICAgICAgIHRoaXMuX3ggPSB0aGlzLl9wYXRoLnJlYWQoKVswXVxyXG4gICAgICAgIHRoaXMuX3kgPSB0aGlzLl9wYXRoLnJlYWQoKVsxXVxyXG4gICAgICAgIHRoaXMuX3NwZWVkID0gZGF0YVtcInNwZWVkXCJdXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCB4KCk6bnVtYmVyey8v6I635Y+WeOi9tOWdkOagh1xyXG4gICAgICAgIHJldHVybiB0aGlzLl94XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCB5KCk6bnVtYmVyey8v6I635Y+Weei9tOWdkOagh1xyXG4gICAgICAgIHJldHVybiB0aGlzLl95XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBhdExhc3ROb2RlKCk6Ym9vbGVhbnsvL+ajgOa1i+aYr+WQpuW3suWIsOi+vuacgOWQjuS4gOS4quiKgueCuVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9wYXRoLnBvaW50ZXIgPT09IHRoaXMuX3BhdGgubGVuZ3RoIC0gMSAmJlxyXG4gICAgICAgIHRoaXMuX3ggPT09IHRoaXMuX3BhdGgubGFzdFswXSAmJlxyXG4gICAgICAgIHRoaXMuX3kgPT09IHRoaXMuX3BhdGgubGFzdFsxXVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgaXNBcnJpdmVkKCk6Ym9vbGVhbnsvL+ajgOa1i+aYr+WQpuW3suWIsOi+vuW9k+WJjeeahOebruagh1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wYXRoLnJlYWQoKVswXSA9PT0gdGhpcy5feCAmJiBcclxuICAgICAgICB0aGlzLl9wYXRoLnJlYWQoKVsxXSA9PT0gdGhpcy5feVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1bml0TW92ZSgpOnZvaWR7Ly/np7vliqjkuIDmrKFcclxuICAgICAgICB0aGlzLl94ID0gTXlNYXRoLm1vdmVUbyh0aGlzLl94LHRoaXMuX3hTcGVlZCx0aGlzLl9wYXRoLnJlYWQoKVswXSkgIC8veOi9tOenu+WKqFxyXG4gICAgICAgIHRoaXMuX3kgPSBNeU1hdGgubW92ZVRvKHRoaXMuX3ksdGhpcy5feVNwZWVkLHRoaXMuX3BhdGgucmVhZCgpWzFdKSAgLy956L2056e75YqoXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldEF4aXNTcGVlZCgpOnZvaWR7Ly/orr7nva7ovbTpgJ/luqZcclxuICAgICAgICBsZXQgeF9zaGlmdDpudW1iZXIgPSB0aGlzLl9wYXRoLnJlYWQoKVswXSAtIHRoaXMuX3gsICAgICAgICAgICAgICAgICAgICAvL+axgnjovbTmgLvot53nprtcclxuICAgICAgICB5X3NoaWZ0Om51bWJlciA9IHRoaXMuX3BhdGgucmVhZCgpWzFdIC0gdGhpcy5feSwgICAgICAgICAgICAgICAgICAgICAgICAvL+axgnnovbTmgLvot53nprtcclxuICAgICAgICBoeXBvdGVudXNlOm51bWJlciA9IE1hdGguc3FydChNYXRoLnBvdyh4X3NoaWZ0LDIpK01hdGgucG93KHlfc2hpZnQsMikpIC8v5rGC55u057q/5oC76Led56a7XHJcbiAgICAgICAgdGhpcy5feFNwZWVkID0geF9zaGlmdCp0aGlzLl9zcGVlZC9oeXBvdGVudXNlICAgLy/orr7nva546L206YCf5bqmXHJcbiAgICAgICAgdGhpcy5feVNwZWVkID0geV9zaGlmdCp0aGlzLl9zcGVlZC9oeXBvdGVudXNlICAgLy/orr7nva556L206YCf5bqmXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG5leHRBaW0oKTp2b2lkey8v5oyH5ZCR5LiL5LiA5Liq55uu5qCHXHJcbiAgICAgICAgdGhpcy5fcGF0aC5zdGVwKClcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFBlb3BsZVxyXG4gKiBcclxuICogXHJcbiAqIFxyXG4gKiBcclxuICogXHJcbiAqL1xyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVuZW15IGV4dGVuZHMgUGVvcGxle1xyXG5cclxuICAgIHByaXZhdGUgX3VwcGVyUGF0aDpHYW1lRmllbGRcclxuICAgIHByaXZhdGUgX2RhdGE6YW55XHJcbiAgICBwcml2YXRlIHNpemU6bnVtYmVyXHJcblxyXG4gICAgcHJpdmF0ZSBfc3RhdGU6RW5lbXlTdGF0ZVxyXG4gICAgcHJpdmF0ZSBfcHJlc2VudDpFbmVteVByZXNlbnRcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih1cHBlclBhdGg6R2FtZUZpZWxkLCBmYXRoZXI6TGF5YS5TcHJpdGUsIGVuZW15RGF0YTphbnksIHBhdGg6bnVtYmVyW11bXSwgZGF0YWJhc2U6RGF0YWJhc2Upe1xyXG4gICAgICAgIHN1cGVyKClcclxuICAgICAgICB0aGlzLl91cHBlclBhdGggPSB1cHBlclBhdGhcclxuICAgICAgICB0aGlzLl9kYXRhID0gZW5lbXlEYXRhXHJcblxyXG4gICAgICAgIHRoaXMuX3ByZXNlbnQgPSBuZXcgRW5lbXlQcmVzZW50KGZhdGhlciwgdGhpcy5fZGF0YSlcclxuICAgICAgICB0aGlzLl9wcmVzZW50LnNldFNpemUoZGF0YWJhc2UuZ2V0R3JvdW5kKClbXCJzaXplXCJdKVxyXG4gICAgICAgIC8vIHRoaXMuX3ByZXNlbnQuc2V0UG9zKDAsMClcclxuXHJcbiAgICAgICAgdGhpcy5fc3RhdGUgPSBuZXcgRW5lbXlTdGF0ZSh0aGlzLl9kYXRhLCBwYXRoKVxyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyhcIuW3suaWsOW7uuaVjOS6ulwiKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMpXHJcbiAgICAgICAgY29uc29sZS5sb2coXCLlt7LmlrDlu7rmlYzkurpcIilcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlKCk6dm9pZHtcclxuICAgICAgICB0aGlzLm1vdmUoKVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbW92ZSgpOnZvaWR7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5Ye95pWw6K+05piOXHJcbiAgICAgICAgICogaHR0cHM6Ly93d3cubHVjaWRjaGFydC5jb20vZG9jdW1lbnRzL3ZpZXcvOTY1ODIzMDUtZWM2ZS00YzQxLWIxNzgtYWE3OGY5MWNlMGQyLzBcclxuICAgICAgICAgKi9cclxuICAgICAgICBpZiAodGhpcy5fc3RhdGUuYXRMYXN0Tm9kZSl7Ly/lpoLmnpzlt7LliLDovr7nu4jngrlcclxuICAgICAgICAgICAgdGhpcy5tb3ZlID0gKCk9Pnt9Ly/liJnmuIXnqbptb3Zl5Ye95pWwXHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5fc3RhdGUuaXNBcnJpdmVkKXsvL+WmguaenOW3suWIsOi+vuS4i+S4gOS4quiKgueCuVxyXG4gICAgICAgICAgICB0aGlzLl9zdGF0ZS5uZXh0QWltKCkvL+mHjeiuvuiKgueCuVxyXG4gICAgICAgICAgICB0aGlzLl9zdGF0ZS5zZXRBeGlzU3BlZWQoKS8v6K6h566X6YCf5bqmXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3N0YXRlLnVuaXRNb3ZlKCkvL+i/m+ihjOS4gOasoeenu+WKqFxyXG4gICAgICAgIHRoaXMuX3ByZXNlbnQuc2V0UG9zKHRoaXMuX3N0YXRlLngsIHRoaXMuX3N0YXRlLnkpLy/mlLnlj5jlhYPntKDkvY3nva5cclxuICAgIH1cclxufVxyXG5cclxuXHJcbi8vIGV4cG9ydCBkZWZhdWx0IGNsYXNzIEVuZW15IGV4dGVuZHMgYmFzaWMuUGVvcGxle1xyXG4vLyAgICAgY29uc3RydWN0b3IoZmF0aGVyOkxheWEuU3ByaXRlLHVwcGVyUGF0aDpHYW1lRmllbGQsZGF0YTphbnkscGF0aDpudW1iZXJbXVtdKXtcclxuLy8gICAgICAgICBzdXBlcigpXHJcbi8vICAgICAgICAgdGhpcy5zdGF0ZS5pbml0KGRhdGEscGF0aClcclxuLy8gICAgICAgICB0aGlzLnByZXNlbnQuaW5pdChmYXRoZXIsIFwiQmFzaWMvVGhlcmUtMi5wbmdcIiwgMCwwKVxyXG5cclxuLy8gICAgICAgICAvLyB0aGlzLnN0YXRlLnNwZWVkID0gNVxyXG4vLyAgICAgICAgIC8vIHRoaXMuc3RhdGUuc2V0QXhpc1NwZWVkKClcclxuICAgICAgICBcclxuLy8gICAgICAgICB0aGlzLnVwZGF0ZSA9ICgpPT57XHJcbi8vICAgICAgICAgICAgIC8vIHRoaXMuc3RhdGUudXBkYXRlUG9zaXRpb24oKVxyXG4vLyAgICAgICAgICAgICAvLyB0aGlzLnByZXNlbnQuc2V0UG9zaXRpb24odGhpcy5zdGF0ZS5wb3NpdGlvbilcclxuLy8gICAgICAgICAgICAgLy8gdGhpcy5zdGF0ZS5pc0Fycml2ZWQoKSAmJiB0aGlzLnN0YXRlLm5leHRBaW0oKVxyXG4vLyAgICAgICAgIH1cclxuICAgICAgICBcclxuLy8gICAgICAgICBMYXlhLnRpbWVyLm9uY2UoMjAwMCx0aGlzLGNvbnNvbGUubG9nLFt0aGlzXSlcclxuLy8gICAgIH1cclxuLy8gfVxyXG5cclxuXHJcblxyXG5cclxuXHJcbi8qXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVuZW15IGV4dGVuZHMgYmFzaWMuUGVvcGxle1xyXG4gICAgcHVibGljIHNwZWVkOm51bWJlciA9IDAuNCAgICAgICAvL+mAn+W6plxyXG4gICAgcHVibGljIENlbnRyZVNoaWZ0Om51bWJlciA9IDM1ICAvL+S4jkdyb3VuZC5Hcmlkcy5zaXpl55qE5LiA5Y2K5L+d5oyB5LiA6Ie077yM56iN5ZCO5pS55Li65Y+Y6YePXHJcbiAgICBwcml2YXRlIGhpdERvY3RvcjpudW1iZXIgPSAxICAgIC8v6L+b6Zeo5LmL5ZCO5omT5YiA5a6i5LuW5aSa5bCR6KGAXHJcbiAgICAvLyBwdWJsaWMgcGF0aDpudW1iZXJbXVtdID0gW1xyXG4gICAgLy8gICAgIFswLDBdLFxyXG4gICAgLy8gICAgIFsxMDAsMTAwXSxcclxuICAgIC8vICAgICBbMCwwXVxyXG4gICAgLy8gXVxyXG4gICAgXHJcbiAgICBwdWJsaWMgcGF0aDpudW1iZXJbXVtdID0gW10gICAgIC8v6Lev5b6E5a+56LGhXHJcbiAgICBwdWJsaWMgZmF0aGVyOkxheWEuU3ByaXRlICAgICAgIC8v5Y6f54K55Z2Q5qCH5a+56LGhXHJcbiAgICBwcml2YXRlIHBsYWNlOkdyaWRzICAgICAgICAgICAgIC8v5Zyw5Zu+5pa55qC85a+56LGhXHJcbiAgICBwcml2YXRlIHVwcGVyUGF0aDpHYW1lRmllbGQgICAgIC8v5ZCr5pyJ5q2k5a6e5L6L55qE5a6e5L6LXHJcblxyXG4gICAgY29uc3RydWN0b3IoZmF0aGVyOkxheWEuU3ByaXRlLCBwbGFjZTpHcmlkcywgdXBwZXJQYXRoOkdhbWVGaWVsZCl7XHJcbiAgICAgICAgc3VwZXIoKVxyXG4gICAgICAgIC8vIGFsZXJ0KDEpXHJcbiAgICAgICAgdGhpcy51cHBlclBhdGggPSB1cHBlclBhdGhcclxuICAgICAgICB0aGlzLmZhdGhlciA9IGZhdGhlclxyXG4gICAgICAgIHRoaXMucGxhY2UgPSBwbGFjZVxyXG4gICAgICAgIHRoaXMuc3RhdGUuZWxlID0gTGF5YS5TcHJpdGUuZnJvbUltYWdlKFwiQmFzaWMvVGhlcmUucG5nXCIpXHJcbiAgICAgICAgLy8gYWxlcnQoMilcclxuXHJcbiAgICAgICAgLy8gY29uc3Qgc3RhcnQ6bnVtYmVyW10gPSB0aGlzLnBhdGguc2hpZnQoKVxyXG4gICAgICAgIHRoaXMuc3RhdGUuZWxlLnBvcygwLDApLnNpemUoMzAsMzApXHJcbiAgICAgICAgZmF0aGVyLmFkZENoaWxkKHRoaXMuc3RhdGUuZWxlKVxyXG5cclxuICAgICAgICB0aGlzLlNldFBhdGgoKVxyXG4gICAgICAgIHRoaXMubW92ZSgpXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBTZXRQYXRoKCl7XHJcbiAgICAgICAgY29uc3QgcG9pbnRzOm51bWJlcltdW10gPSBbXHJcbiAgICAgICAgICAgIFswLDBdLFxyXG4gICAgICAgICAgICBbMCw1XSxcclxuICAgICAgICAgICAgWzUsNV0sXHJcbiAgICAgICAgICAgIFs1LDNdLFxyXG4gICAgICAgICAgICBbMywzXSxcclxuICAgICAgICAgICAgWzMsMF0sXHJcbiAgICAgICAgICAgIFs1LDBdLFxyXG4gICAgICAgICAgICBbNSw5XVxyXG4gICAgICAgIF1cclxuICAgICAgICBwb2ludHMuZm9yRWFjaCgoZWxlKT0+e1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnVwcGVyUGF0aClcclxuICAgICAgICAgICAgY29uc3QgcmVjOkxheWEuUmVjdGFuZ2xlID0gdGhpcy51cHBlclBhdGguZ3JpZHMuUmVjTWFwW2VsZVswXV1bZWxlWzFdXVxyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50Om51bWJlcltdID0gW1xyXG4gICAgICAgICAgICAgICAgcmVjLngsXHJcbiAgICAgICAgICAgICAgICByZWMueVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIHRoaXMucGF0aC5wdXNoKGN1cnJlbnQpXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG1vdmUoKXtcclxuICAgICAgICBjb25zdCB0YXJnZXQ6bnVtYmVyW10gPSB0aGlzLnBhdGguc2hpZnQoKVxyXG4gICAgICAgIGlmICh0YXJnZXQgPT09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIHRoaXMuZ29hbCgpXHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7eCx5fSA9IHRoaXMuc3RhdGUuZWxlXHJcbiAgICAgICAgY29uc3QgaHlwb3RlbnVzZTpudW1iZXIgPSBNYXRoLnNxcnQoTWF0aC5wb3coeC10YXJnZXRbMF0sMikrTWF0aC5wb3coeS10YXJnZXRbMV0sMikpXHJcbiAgICAgICAgY29uc3QgdGltZTpudW1iZXIgPSBNYXRoLmZsb29yKGh5cG90ZW51c2UvdGhpcy5zcGVlZClcclxuICAgICAgICBjb25zdCB0d2VlbjpMYXlhLlR3ZWVuID0gTGF5YS5Ud2Vlbi50byh0aGlzLnN0YXRlLmVsZSwge3g6dGFyZ2V0WzBdLHk6dGFyZ2V0WzFdfSwgdGltZSwgbnVsbCxcclxuICAgICAgICAgICAgTGF5YS5IYW5kbGVyLmNyZWF0ZSh0aGlzLHRoaXMubW92ZSksMTAwKVxyXG5cclxuICAgIH1cclxuICAgIFxyXG5cclxuICAgIHByaXZhdGUgZ29hbCgpe1xyXG4gICAgICAgIHRoaXMudXBwZXJQYXRoLmRvY3Rvci5kYW1hZ2VkKHRoaXMuaGl0RG9jdG9yKVxyXG4gICAgfVxyXG59XHJcbiovIiwiaW1wb3J0IEdhbWVGaWVsZCBmcm9tIFwiLi4vU2NlbmVTY3JpcHQvR2FtZUZpZWxkXCI7XHJcbmltcG9ydCBEYXRhYmFzZSBmcm9tIFwiLi9EYXRhYmFzZVwiXHJcblxyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBHcmlkc3tcclxuICAgIHByaXZhdGUgdXBwZXJQYXRoOkdhbWVGaWVsZFxyXG4gICAgcHJpdmF0ZSBmYXRoZXI6TGF5YS5TcHJpdGVcclxuICAgIHByaXZhdGUgZGF0YWJhc2U6RGF0YWJhc2VcclxuXHJcblxyXG4gICAgXHJcbiAgICBwcml2YXRlIHNwcml0ZUdyb3VwOkxheWEuU3ByaXRlW11bXSA9IFtdXHJcbiAgICBwcml2YXRlIHJlY3RHcm91cDpMYXlhLlJlY3RhbmdsZVtdW10gPSBbXVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKHVwcGVyUGF0aDpHYW1lRmllbGQsIGZhdGhlcjpMYXlhLlNwcml0ZSwgZGF0YWJhc2U6RGF0YWJhc2Upe1xyXG4gICAgICAgIHRoaXMudXBwZXJQYXRoID0gdXBwZXJQYXRoXHJcbiAgICAgICAgdGhpcy5mYXRoZXIgPSBmYXRoZXJcclxuICAgICAgICB0aGlzLmRhdGFiYXNlID0gZGF0YWJhc2VcclxuXHJcbiAgICAgICAgLy/liJvlu7rmuLjmiI/lnLrlnLA6IFN0YXJ0XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgZ3JvdW5kOmFueSA9IGRhdGFiYXNlLmdldEdyb3VuZCgpLFxyXG4gICAgICAgIHdpZHRoOm51bWJlciA9IGdyb3VuZFtcIndpZHRoXCJdLFxyXG4gICAgICAgIGhlaWdodDpudW1iZXIgPSBncm91bmRbXCJoZWlnaHRcIl0sXHJcbiAgICAgICAgc2l6ZTpudW1iZXIgPSBncm91bmRbXCJzaXplXCJdLFxyXG4gICAgICAgIG1hdHJpeDpudW1iZXIgPSBncm91bmRbXCJtYXRyaXhcIl1cclxuXHJcbiAgICAgICAgZm9yKGxldCB4ID0gMDsgeCA8IHdpZHRoOyB4ICs9IDEpIHtcclxuICAgICAgICAgICAgdGhpcy5zcHJpdGVHcm91cFt4XSA9IFtdXHJcbiAgICAgICAgICAgIHRoaXMucmVjdEdyb3VwW3hdID0gW11cclxuICAgICAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBoZWlnaHQ7IHkgKz0gMSkge1xyXG4gICAgICAgICAgICAgICAgLy/liJvlu7pzcHJpdGU6IFN0YXJ0XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzcHJpdGU6TGF5YS5TcHJpdGUgPSBMYXlhLlNwcml0ZS5mcm9tSW1hZ2UoXCJCYXNpYy9SZWMucG5nXCIpXHJcbiAgICAgICAgICAgICAgICBzcHJpdGUucG9zKHgqc2l6ZSx5KnNpemUpLnNpemUoc2l6ZSxzaXplKVxyXG4gICAgICAgICAgICAgICAgZmF0aGVyLmFkZENoaWxkKHNwcml0ZSlcclxuICAgICAgICAgICAgICAgIHRoaXMuc3ByaXRlR3JvdXBbeF1beV0gPSBzcHJpdGVcclxuICAgICAgICAgICAgICAgIC8v5Yib5bu6U3ByaXRlOiBFbmRcclxuXHJcbiAgICAgICAgICAgICAgICAvL+WIm+W7ulJlY3RhbmdsZTogU3RhcnRcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlY3Q6TGF5YS5SZWN0YW5nbGUgPSBuZXcgTGF5YS5SZWN0YW5nbGUoeCpzaXplLHkqc2l6ZSxzaXplLHNpemUpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlY3RHcm91cFt4XVt5XSA9IHJlY3RcclxuICAgICAgICAgICAgICAgIC8v5Yib5bu6UmVjdGFuZ2xlOiBFbmRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvL+WIm+W7uua4uOaIj+WcuuWcsDogRW5kXHJcbiAgICAgICAgY29uc29sZS5sb2coXCJHcmlkc+WvueixoeWIm+W7uuWujOaIkFwiKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMpXHJcbiAgICAgICAgY29uc29sZS5sb2coXCJHcmlkc+WvueixoeWIm+W7uuWujOaIkFwiKVxyXG4gICAgfVxyXG59XHJcblxyXG4vLyBleHBvcnQgY2xhc3MgR3JpZHN7XHJcbi8vICAgICBwdWJsaWMgTWFwOkFycmF5PEFycmF5PExheWEuU3ByaXRlPj4gPSBbXVxyXG4vLyAgICAgcHVibGljIFJlY01hcDpBcnJheTxBcnJheTxMYXlhLlJlY3RhbmdsZT4+ID0gW11cclxuLy8gICAgIHByaXZhdGUgc3RhdGljIHNpemU6bnVtYmVyID0gOTBcclxuLy8gICAgIHByaXZhdGUgZmF0aGVyOkxheWEuU3ByaXRlXHJcbi8vICAgICBwcml2YXRlIHVwcGVyUGF0aDpHYW1lRmllbGRcclxuLy8gICAgIHByaXZhdGUgZGF0YTpKU09OXHJcbi8vICAgICAvL29sZFxyXG4vLyAgICAgLy9uZXdcclxuLy8gICAgIHByaXZhdGUgZGF0YWJhc2U6RGF0YWJhc2VcclxuXHJcbi8vICAgICBjb25zdHJ1Y3RvcihmYXRoZXI6TGF5YS5TcHJpdGUsIHVwcGVyUGF0aDpHYW1lRmllbGQsIGRhdGFiYXNlOkRhdGFiYXNlKXtcclxuLy8gICAgICAgICB0aGlzLmRhdGFiYXNlID0gZGF0YWJhc2VcclxuLy8gICAgICAgICAvLyB0aGlzLmZhdGhlciA9IGZhdGhlclxyXG4vLyAgICAgICAgIC8vIHRoaXMudXBwZXJQYXRoID0gdXBwZXJQYXRoXHJcbi8vICAgICAgICAgLy8gdGhpcy5kYXRhID0gZGF0YVxyXG4vLyAgICAgICAgIC8vIGxldCBjb2xzID0gZGF0YVtcImdyb3VuZFwiXVtcIndpZHRoXCJdLFxyXG4vLyAgICAgICAgIC8vIHJhd3MgPSBkYXRhW1wiZ3JvdW5kXCJdW1wiaGVpZ2h0XCJdXHJcbiAgICAgICAgXHJcbi8vICAgICAgICAgLy8gZm9yIChsZXQgbiA9IDA7IG4gPCByYXdzOyBuICs9IDEpIHtcclxuLy8gICAgICAgICAvLyAgICAgdGhpcy5NYXBbbl0gPSBbXVxyXG4vLyAgICAgICAgIC8vICAgICB0aGlzLlJlY01hcFtuXSA9IFtdXHJcbi8vICAgICAgICAgLy8gICAgIGZvciAobGV0IG0gPSAwOyBtIDwgY29sczsgbSArPSAxKSB7XHJcbi8vICAgICAgICAgLy8gICAgICAgICB0aGlzLmluaXRFbGVtZW50KG4sbSlcclxuLy8gICAgICAgICAvLyAgICAgfVxyXG4vLyAgICAgICAgIC8vIH1cclxuLy8gICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLlJlY01hcClcclxuLy8gICAgIH1cclxuXHJcblxyXG4vLyAgICAgaW5pdEVsZW1lbnQocmF3Om51bWJlcixjb3VudDpudW1iZXIpe1xyXG4vLyAgICAgICAgIGNvbnN0IGN1cnJlbnQ6TGF5YS5TcHJpdGUgPSBMYXlhLlNwcml0ZS5mcm9tSW1hZ2UoXCJCYXNpYy9SZWMucG5nXCIpOy8v6L295YWl5Zu+54mHXHJcbi8vICAgICAgICAgY3VycmVudC5wb3MoR3JpZHMuc2l6ZSpjb3VudCwgR3JpZHMuc2l6ZSpyYXcpXHJcbi8vICAgICAgICAgICAgIC5zaXplKEdyaWRzLnNpemUsR3JpZHMuc2l6ZSkvL+S+neaNrnN0YXRpYyBzaXpl5bGe5oCn5pS55Y+Y5aSn5bCP44CB5L6d5o2u57yW5Y+35pS55Y+Y5L2N572uXHJcbi8vICAgICAgICAgY3VycmVudC5uYW1lID0gYGdyaWQke3Jhd30tJHtjb3VudH1gLy/ph43lkb3lkI3kuLogZ3JpZOihjOaVsC3liJfmlbBcclxuICAgICAgICBcclxuLy8gICAgICAgICB0aGlzLk1hcFtyYXddW2NvdW50XSA9IGN1cnJlbnRcclxuLy8gICAgICAgICB0aGlzLlJlY01hcFtyYXddW2NvdW50XSA9IG5ldyBMYXlhLlJlY3RhbmdsZShjdXJyZW50LngsY3VycmVudC55LEdyaWRzLnNpemUsR3JpZHMuc2l6ZSlcclxuLy8gICAgICAgICAvLyBjdXJyZW50Lm9uKExheWEuRXZlbnQuQ0xJQ0ssIHRoaXMudXBwZXJQYXRoLCB0aGlzLnVwcGVyUGF0aC5hZGRPcGVyYXRvciwgW3RoaXMuZ2V0UGxhY2UoY291bnQscmF3KV0pLy/orr7lrprpvKDmoIfngrnlh7vkuovku7ZcclxuLy8gICAgICAgICAvL+WQkUdhbWVGaWVsZOS4rea3u+WKoE9wZXJhdG9y5a6e5L6LXHJcbi8vICAgICAgICAgdGhpcy5mYXRoZXIuYWRkQ2hpbGQoY3VycmVudClcclxuLy8gICAgIH1cclxuXHJcbi8vICAgICBnZXRQbGFjZShjb3VudDpudW1iZXIscmF3Om51bWJlcik6bnVtYmVyW117XHJcbi8vICAgICAgICAgLy9yYXc656ys5Yeg6KGMXHJcbi8vICAgICAgICAgLy9jb3VudDrnrKzlh6DkuKpcclxuLy8gICAgICAgICByZXR1cm4gW1xyXG4vLyAgICAgICAgICAgICB0aGlzLlJlY01hcFtyYXddW2NvdW50XS54LFxyXG4vLyAgICAgICAgICAgICB0aGlzLlJlY01hcFtyYXddW2NvdW50XS55XHJcbi8vICAgICAgICAgXVxyXG4vLyAgICAgfVxyXG4vLyB9XHJcblxyXG5cclxuXHJcblxyXG4iLCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIFBlb3BsZSB7XHJcbiAgICBcclxuICAgIFxyXG4gICAgY29uc3RydWN0b3IoKSB7fVxyXG59IiwiXHJcbi8qKlxyXG4gKiBQcmVzZW5077ya6KGo546w57G7XHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBQcmVzZW50IHtcclxuXHJcbiAgICBwcml2YXRlIF9zcHJpdGU6TGF5YS5TcHJpdGVcclxuICAgIHByaXZhdGUgX2ZhdGhlcjpMYXlhLlNwcml0ZVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGZhdGhlcjpMYXlhLlNwcml0ZSxkYXRhOmFueSkge1xyXG4gICAgICAgIHRoaXMuX3Nwcml0ZSA9IExheWEuU3ByaXRlLmZyb21JbWFnZShkYXRhW1wiaW1nXCJdKVxyXG4gICAgICAgIHRoaXMuX2ZhdGhlciA9IGZhdGhlclxyXG5cclxuICAgICAgICB0aGlzLl9mYXRoZXIuYWRkQ2hpbGQodGhpcy5fc3ByaXRlKVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRTaXplKHNpemU6bnVtYmVyKTp2b2lke1xyXG4gICAgICAgIHRoaXMuX3Nwcml0ZS5zaXplKHNpemUsc2l6ZSlcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0UG9zKHg6bnVtYmVyLHk6bnVtYmVyKTp2b2lke1xyXG4gICAgICAgIHRoaXMuX3Nwcml0ZS5wb3MoeCx5KVxyXG4gICAgfVxyXG5cclxuXHJcbn0iLCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIFN0YXRlIHtcclxuICAgIHByaXZhdGUgX2xvZGF0aW9uOm51bWJlcltdW11cclxuICAgIGNvbnN0cnVjdG9yKGRhdGE6YW55KSB7XHJcbiAgICAgICAgXHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgR2FtZUZpZWxkIGZyb20gXCIuLi9TY2VuZVNjcmlwdC9HYW1lRmllbGRcIjtcclxuaW1wb3J0IERhdGFiYXNlIGZyb20gXCIuL0RhdGFiYXNlXCI7XHJcblxyXG5cclxuY2xhc3MgU2lkZU9wZXJhdG9ye1xyXG4gICAgcHJpdmF0ZSBfdXBwZXJQYXRoOlNpZGVGaWVsZFxyXG4gICAgcHJpdmF0ZSBfZmF0aGVyOkxheWEuU3ByaXRlXHJcbiAgICBwcml2YXRlIF9kYXRhOmFueVxyXG4gICAgcHJpdmF0ZSBfdW5pdDpMYXlhLlNwcml0ZVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKHVwcGVyUGF0aDpTaWRlRmllbGQsIGZhdGhlcjpMYXlhLlNwcml0ZSwgZGF0YTphbnkpe1xyXG4gICAgICAgIHRoaXMuX3VwcGVyUGF0aCA9IHVwcGVyUGF0aFxyXG4gICAgICAgIHRoaXMuX2ZhdGhlciA9IGZhdGhlclxyXG4gICAgICAgIHRoaXMuX2RhdGEgPSBkYXRhXHJcbiAgICAgICAgdGhpcy5fdW5pdCA9IExheWEuU3ByaXRlLmZyb21JbWFnZShkYXRhW1wiaW1nXCJdKVxyXG4gICAgICAgIGZhdGhlci5hZGRDaGlsZCh0aGlzLl91bml0KVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzaXplKHdpZHRoOm51bWJlcixoZWlnaHQ6bnVtYmVyKTp2b2lke1xyXG4gICAgICAgIHRoaXMuX3VuaXQuc2l6ZSh3aWR0aCxoZWlnaHQpXHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBwb3MoeDpudW1iZXIseTpudW1iZXIpOnZvaWR7XHJcbiAgICAgICAgdGhpcy5fdW5pdC5wb3MoeCx5KVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgc3ByaXRlKCk6TGF5YS5TcHJpdGV7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VuaXRcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGRhdGEoKTphbnl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGFcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2lkZUZpZWxke1xyXG4gICAgLyoqXHJcbiAgICAgKiDlj7PkvqflubLlkZjmoI/nmoRVSeeuoeeQhuexu1xyXG4gICAgICovXHJcblxyXG4gICAgXHJcbiAgICBwcml2YXRlIF91cHBlclBhdGg6R2FtZUZpZWxkXHJcbiAgICBwcml2YXRlIF9mYXRoZXI6TGF5YS5TcHJpdGVcclxuICAgIC8vIHByaXZhdGUgX29wZXJhdG9yTGlzdDpzdHJpbmdbXVxyXG4gICAgcHJpdmF0ZSBfc2lkZU9wZXJhdG9yczpTaWRlT3BlcmF0b3JbXT0gW11cclxuICAgIHByaXZhdGUgX2RhdGFiYXNlOkRhdGFiYXNlXHJcbiAgICBwcml2YXRlIF9mcmFtZTpMYXlhLlNwcml0ZVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKHVwcGVyUGF0aDpHYW1lRmllbGQsIGZhdGhlcjpMYXlhLlNwcml0ZSwgbGlzdDpzdHJpbmdbXSwgZGF0YWJhc2U6RGF0YWJhc2Upe1xyXG4gICAgICAgIHRoaXMuX3VwcGVyUGF0aCA9IHVwcGVyUGF0aFxyXG4gICAgICAgIHRoaXMuX2ZhdGhlciA9IGZhdGhlclxyXG4gICAgICAgIC8vIHRoaXMuX29wZXJhdG9yTGlzdCA9IGxpc3RcclxuICAgICAgICB0aGlzLl9kYXRhYmFzZSA9IGRhdGFiYXNlXHJcbiAgICAgICAgdGhpcy5fZnJhbWUgPSBMYXlhLlNwcml0ZS5mcm9tSW1hZ2UoXCJCYXNpYy9SZWMucG5nXCIpXHJcbiAgICAgICAgbGV0IGdyb3VuZDphbnkgPSBkYXRhYmFzZS5nZXRHcm91bmQoKVxyXG4gICAgICAgIHRoaXMuX2ZyYW1lLnNpemUoXHJcbiAgICAgICAgICAgIDEwMCxcclxuICAgICAgICAgICAgZ3JvdW5kW1wic2l6ZVwiXSpncm91bmRbXCJoZWlnaHRcIl1cclxuICAgICAgICApLnBvcyhcclxuICAgICAgICAgICAgZ3JvdW5kW1wic2l6ZVwiXSpncm91bmRbXCJ3aWR0aFwiXSxcclxuICAgICAgICAgICAgMFxyXG4gICAgICAgIClcclxuICAgICAgICB0aGlzLl9mYXRoZXIuYWRkQ2hpbGQodGhpcy5fZnJhbWUpXHJcbiAgICAgICAgdGhpcy5pbml0U2lkZShsaXN0KVxyXG5cclxuXHJcbiAgICAgICAgY29uc29sZS5sb2codGhpcylcclxuICAgIH1cclxuICAgIHByaXZhdGUgaW5pdFNpZGUobGlzdDpzdHJpbmdbXSk6dm9pZHtcclxuICAgICAgICBsaXN0LmZvckVhY2goKGVsZSxpbmRleCk9PntcclxuICAgICAgICAgICAgbGV0IGRhdGE6YW55ID0gdGhpcy5fZGF0YWJhc2UuZ2V0T3BlcmF0b3IoZWxlKVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICBsZXQgY3VycmVudFNpZGU6U2lkZU9wZXJhdG9yID0gbmV3IFNpZGVPcGVyYXRvcih0aGlzLCB0aGlzLl9mcmFtZSwgZGF0YSlcclxuICAgICAgICAgICAgY3VycmVudFNpZGUucG9zKDAsaW5kZXgqMTAwKVxyXG4gICAgICAgICAgICBjdXJyZW50U2lkZS5zaXplKDEwMCwxMDApXHJcbiAgICAgICAgICAgIHRoaXMuX3NpZGVPcGVyYXRvcnMucHVzaChjdXJyZW50U2lkZSlcclxuXHJcbiAgICAgICAgfSlcclxuICAgICAgICB0aGlzLmluaXRTaWRlID0gKCk9Pnt9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBnZXQgc2lkZVNwcml0ZXMoKTpMYXlhLlNwcml0ZVtde1xyXG4gICAgICAgIGxldCByZXN1bHQ6TGF5YS5TcHJpdGVbXSA9IFtdXHJcbiAgICAgICAgdGhpcy5fc2lkZU9wZXJhdG9ycy5mb3JFYWNoKGVsZT0+e1xyXG4gICAgICAgICAgICByZXN1bHQucHVzaChlbGUuc3ByaXRlKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgc2lkZURhdGEoKTphbnlbXXtcclxuICAgICAgICBsZXQgcmVzdWx0OmFueVtdID0gW11cclxuICAgICAgICB0aGlzLl9zaWRlT3BlcmF0b3JzLmZvckVhY2goZWxlPT57XHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGVsZS5kYXRhKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgfVxyXG5cclxufSIsImltcG9ydCBHYW1lQ29uZmlnIGZyb20gXCIuL0dhbWVDb25maWdcIjtcclxuY2xhc3MgTWFpbiB7XHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHQvL+agueaNrklEReiuvue9ruWIneWni+WMluW8leaTjlx0XHRcclxuXHRcdGlmICh3aW5kb3dbXCJMYXlhM0RcIl0pIExheWEzRC5pbml0KEdhbWVDb25maWcud2lkdGgsIEdhbWVDb25maWcuaGVpZ2h0KTtcclxuXHRcdGVsc2UgTGF5YS5pbml0KEdhbWVDb25maWcud2lkdGgsIEdhbWVDb25maWcuaGVpZ2h0LCBMYXlhW1wiV2ViR0xcIl0pO1xyXG5cdFx0TGF5YVtcIlBoeXNpY3NcIl0gJiYgTGF5YVtcIlBoeXNpY3NcIl0uZW5hYmxlKCk7XHJcblx0XHRMYXlhW1wiRGVidWdQYW5lbFwiXSAmJiBMYXlhW1wiRGVidWdQYW5lbFwiXS5lbmFibGUoKTtcclxuXHRcdExheWEuc3RhZ2Uuc2NhbGVNb2RlID0gR2FtZUNvbmZpZy5zY2FsZU1vZGU7XHJcblx0XHRMYXlhLnN0YWdlLnNjcmVlbk1vZGUgPSBHYW1lQ29uZmlnLnNjcmVlbk1vZGU7XHJcblx0XHQvL+WFvOWuueW+ruS/oeS4jeaUr+aMgeWKoOi9vXNjZW5l5ZCO57yA5Zy65pmvXHJcblx0XHRMYXlhLlVSTC5leHBvcnRTY2VuZVRvSnNvbiA9IEdhbWVDb25maWcuZXhwb3J0U2NlbmVUb0pzb247XHJcblxyXG5cdFx0Ly/miZPlvIDosIPor5XpnaLmnb/vvIjpgJrov4dJREXorr7nva7osIPor5XmqKHlvI/vvIzmiJbogIV1cmzlnLDlnYDlop7liqBkZWJ1Zz10cnVl5Y+C5pWw77yM5Z2H5Y+v5omT5byA6LCD6K+V6Z2i5p2/77yJXHJcblx0XHRpZiAoR2FtZUNvbmZpZy5kZWJ1ZyB8fCBMYXlhLlV0aWxzLmdldFF1ZXJ5U3RyaW5nKFwiZGVidWdcIikgPT0gXCJ0cnVlXCIpIExheWEuZW5hYmxlRGVidWdQYW5lbCgpO1xyXG5cdFx0aWYgKEdhbWVDb25maWcucGh5c2ljc0RlYnVnICYmIExheWFbXCJQaHlzaWNzRGVidWdEcmF3XCJdKSBMYXlhW1wiUGh5c2ljc0RlYnVnRHJhd1wiXS5lbmFibGUoKTtcclxuXHRcdGlmIChHYW1lQ29uZmlnLnN0YXQpIExheWEuU3RhdC5zaG93KCk7XHJcblx0XHRMYXlhLmFsZXJ0R2xvYmFsRXJyb3IgPSB0cnVlO1xyXG5cclxuXHRcdC8v5r+A5rS76LWE5rqQ54mI5pys5o6n5Yi277yMdmVyc2lvbi5qc29u55SxSURF5Y+R5biD5Yqf6IO96Ieq5Yqo55Sf5oiQ77yM5aaC5p6c5rKh5pyJ5Lmf5LiN5b2x5ZON5ZCO57ut5rWB56iLXHJcblx0XHRMYXlhLlJlc291cmNlVmVyc2lvbi5lbmFibGUoXCJ2ZXJzaW9uLmpzb25cIiwgTGF5YS5IYW5kbGVyLmNyZWF0ZSh0aGlzLCB0aGlzLm9uVmVyc2lvbkxvYWRlZCksIExheWEuUmVzb3VyY2VWZXJzaW9uLkZJTEVOQU1FX1ZFUlNJT04pO1xyXG5cdH1cclxuXHJcblx0b25WZXJzaW9uTG9hZGVkKCk6IHZvaWQge1xyXG5cdFx0Ly/mv4DmtLvlpKflsI/lm77mmKDlsITvvIzliqDovb3lsI/lm77nmoTml7blgJnvvIzlpoLmnpzlj5HnjrDlsI/lm77lnKjlpKflm77lkIjpm4bph4zpnaLvvIzliJnkvJjlhYjliqDovb3lpKflm77lkIjpm4bvvIzogIzkuI3mmK/lsI/lm75cclxuXHRcdExheWEuQXRsYXNJbmZvTWFuYWdlci5lbmFibGUoXCJmaWxlY29uZmlnLmpzb25cIiwgTGF5YS5IYW5kbGVyLmNyZWF0ZSh0aGlzLCB0aGlzLm9uQ29uZmlnTG9hZGVkKSk7XHJcblx0fVxyXG5cclxuXHRvbkNvbmZpZ0xvYWRlZCgpOiB2b2lkIHtcclxuXHRcdC8v5Yqg6L29SURF5oyH5a6a55qE5Zy65pmvXHJcblx0XHRHYW1lQ29uZmlnLnN0YXJ0U2NlbmUgJiYgTGF5YS5TY2VuZS5vcGVuKEdhbWVDb25maWcuc3RhcnRTY2VuZSk7XHJcblx0fVxyXG59XHJcbi8v5r+A5rS75ZCv5Yqo57G7XHJcbm5ldyBNYWluKCk7XHJcbiIsImltcG9ydCB7dWl9IGZyb20gXCIuLi91aS9sYXlhTWF4VUlcIlxyXG5pbXBvcnQgRW5lbXkgZnJvbSBcIi4uL0dhbWVPYmovRW5lbXlcIlxyXG5pbXBvcnQge0dyaWRzfSBmcm9tIFwiLi4vR2FtZU9iai9Hcmlkc1wiXHJcbmltcG9ydCBEb2N0b3IgZnJvbSBcIi4uL0dhbWVPYmovRG9jdG9yXCJcclxuaW1wb3J0IE9wZXJhdG9yIGZyb20gXCIuLi9HYW1lT2JqL09wZXJhdG9yXCJcclxuaW1wb3J0IHtTdHJ1Y30gZnJvbSBcIi4uL0RhdGFTdHJ1Y3R1cmVcIlxyXG5pbXBvcnQgRGF0YWJhc2UgZnJvbSBcIi4uL0dhbWVPYmovRGF0YWJhc2VcIlxyXG4vLyBpbXBvcnQgR2FtZUV2ZW50TWFuYWdlciBmcm9tIFwiLi4vR2FtZU9iai9HYW1lRXZlbnRcIjtcclxuaW1wb3J0IFNpZGVGaWVsZCBmcm9tIFwiLi4vR2FtZU9iai9TaWRlRmllbGRcIjtcclxuY29uc3Qge2xvZ30gPSBjb25zb2xlO1xyXG5cclxuY2xhc3MgR2FtZUV2ZW50TWFuYWdlcntcclxuXHJcbiAgICBwcml2YXRlIHVwcGVyUGF0aDpHYW1lRmllbGRcclxuICAgIHByaXZhdGUgZGF0YWJhc2U6RGF0YWJhc2VcclxuICAgIFxyXG5cclxuICAgIGNvbnN0cnVjdG9yKHVwcGVycGF0aDpHYW1lRmllbGQpe1xyXG4gICAgICAgIHRoaXMudXBwZXJQYXRoID0gdXBwZXJwYXRoXHJcbiAgICAgICAgdGhpcy5kYXRhYmFzZSA9IHVwcGVycGF0aC5fZGF0YWJhc2VcclxuICAgICAgICB0aGlzLmluaXRfZHJhZ0Zyb21TaWRlKClcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGluaXRfZHJhZ0Zyb21TaWRlKCk6dm9pZHtcclxuICAgICAgICB0aGlzLnVwcGVyUGF0aC5zaWRlRmllbGRcclxuICAgIH1cclxuICAgIFxyXG59XHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZUZpZWxkIGV4dGVuZHMgdWkuR2FtZUZpZWxkU2NlbmVVSXtcclxuICAgIFxyXG4gICAgcHVibGljIF9kYXRhYmFzZTpEYXRhYmFzZVxyXG4gICAgcHVibGljIF9ncmlkczpHcmlkc1xyXG4gICAgcHJpdmF0ZSBfZW5lbWllczpFbmVteVtdID0gW11cclxuICAgIHByaXZhdGUgX29wZXJhdG9yczpPcGVyYXRvcltdID0gW11cclxuICAgIHByaXZhdGUgX2RvY3RvcjpEb2N0b3IgXHJcbiAgICBwcml2YXRlIF9nYW1lRXZlbnRNYW5hZ2VyOkdhbWVFdmVudE1hbmFnZXJcclxuICAgIHB1YmxpYyBzaWRlRmllbGQ6U2lkZUZpZWxkXHJcblxyXG4gICAgcHJpdmF0ZSBfdGltZV9mcmFtZTpudW1iZXIgPSAwXHJcblxyXG4gICAgY29uc3RydWN0b3IoKXtcclxuICAgICAgICBzdXBlcigpXHJcbiAgICAgICAgdGhpcy5fZGF0YWJhc2UgPSBuZXcgRGF0YWJhc2UoKVxyXG4gICAgICAgIHRoaXMuX2dyaWRzID0gbmV3IEdyaWRzKHRoaXMsdGhpcy5VSVNldCx0aGlzLl9kYXRhYmFzZSlcclxuICAgICAgICB0aGlzLnNpZGVGaWVsZCA9IG5ldyBTaWRlRmllbGQodGhpcywgdGhpcy5VSVNldCwgW1wiYmlyZFwiLFwic2JcIixcImJpcmRcIl0sIHRoaXMuX2RhdGFiYXNlKS8v5Y+C5pWwW1wiYmlyZFwiXeWwhuWcqOmAieS6uuWKn+iDveWujOaIkOWQjuaUueS4uuWPmOmHj1xyXG4gICAgICAgIC8vIHRoaXMuX2dhbWVFdmVudE1hbmFnZXIgPSBuZXcgR2FtZUV2ZW50TWFuYWdlcih0aGlzKVxyXG4gICAgICAgIHRoaXMuaW5pdF9zaWRlRXZlbnQoKVxyXG5cclxuICAgICAgICBMYXlhLnRpbWVyLmxvb3AoMjAsdGhpcyx0aGlzLnRvTG9vcClcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdG9Mb29wKCl7XHJcbiAgICAgICAgd2hpbGUgKHRoaXMuX2RhdGFiYXNlLmlzSGFwcGVuaW5nKHRoaXMuX3RpbWVfZnJhbWUpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2VuZW1pZXMucHVzaChuZXcgRW5lbXkodGhpcyx0aGlzLlVJU2V0LFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGF0YWJhc2UucmVhZFRpbWVFdmVudCgpLnR5cGVEYXRhLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGF0YWJhc2UucmVhZFRpbWVFdmVudCgpLnBhdGgsXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kYXRhYmFzZSkpXHJcbiAgICAgICAgICAgIHRoaXMuX2RhdGFiYXNlLnJlYWRUaW1lRXZlbnREb25lKClcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2VuZW1pZXMuZm9yRWFjaChlbGU9PntcclxuICAgICAgICAgICAgZWxlLnVwZGF0ZSgpXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgdGhpcy5fdGltZV9mcmFtZSArPSAxXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpbml0X3NpZGVFdmVudCgpOnZvaWR7XHJcbiAgICAgICAgbGV0IHRvQnVpbGRFdmVudHM6TGF5YS5TcHJpdGVbXSA9IHRoaXMuc2lkZUZpZWxkLnNpZGVTcHJpdGVzXHJcbiAgICAgICAgbGV0IGRhdGE6YW55W10gPSB0aGlzLnNpZGVGaWVsZC5zaWRlRGF0YVxyXG4gICAgICAgIHRvQnVpbGRFdmVudHMuZm9yRWFjaCgoZWxlLCBpbmRleCk9PntcclxuICAgICAgICAgICAgZWxlLm9uKExheWEuRXZlbnQuTU9VU0VfRE9XTiwgdGhpcywgdGhpcy5vbkRyYWcsIFtkYXRhW2luZGV4XV0pXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uRHJhZyhkYXRhOmFueSk6dm9pZHtcclxuICAgICAgICBsZXQgc3ByOkxheWEuU3ByaXRlID0gTGF5YS5TcHJpdGUuZnJvbUltYWdlKGRhdGFbXCJpbWdcIl0pXHJcbiAgICAgICAgc3ByLnNpemUodGhpcy5fZGF0YWJhc2UuZ2V0R3JvdW5kKClbXCJzaXplXCJdLHRoaXMuX2RhdGFiYXNlLmdldEdyb3VuZCgpW1wic2l6ZVwiXSlcclxuICAgICAgICB0aGlzLlVJU2V0LmFkZENoaWxkKHNwcilcclxuICAgICAgICBsZXQgZHJhZ2luZzpGdW5jdGlvbiA9ICgpPT57XHJcbiAgICAgICAgICAgIHNwci5wb3MoXHJcbiAgICAgICAgICAgICAgICB0aGlzLlVJU2V0Lm1vdXNlWCxcclxuICAgICAgICAgICAgICAgIHRoaXMuVUlTZXQubW91c2VZXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICB9XHJcbiAgICAgICAgTGF5YS50aW1lci5sb29wKDEwLCB0aGlzLCBkcmFnaW5nKVxyXG4gICAgICAgIHRoaXMuc3RhZ2Uub24oTGF5YS5FdmVudC5NT1VTRV9VUCwgdGhpcywgKCk9PntMYXlhLnRpbWVyLmNsZWFyKHRoaXMsZHJhZ2luZyl9KVxyXG4gICAgfVxyXG5cclxufVxyXG4vLyBleHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lRmllbGQgZXh0ZW5kcyB1aS5HYW1lRmllbGRTY2VuZVVJe1xyXG4vLyAgICAgLyoqXHJcbi8vICAgICAgKiBzYlxyXG4vLyAgICAgICovXHJcbi8vICAgICBwdWJsaWMgZ3JpZHM6R3JpZHNcclxuLy8gICAgIHB1YmxpYyBkb2N0b3I6RG9jdG9yXHJcbi8vICAgICBwdWJsaWMgb3BlcmF0b3JzOkFycmF5PE9wZXJhdG9yPiA9IFtdXHJcbi8vICAgICBwdWJsaWMgZW5lbWllczpBcnJheTxFbmVteT4gPSBbXVxyXG4vLyAgICAgcHJpdmF0ZSBvbktleWRvd246RnVuY3Rpb25cclxuXHJcbi8vICAgICBwdWJsaWMgR2FtZVNldDpKU09OXHJcbi8vICAgICBwdWJsaWMgRW5lbXlEYXRhYmFzZTpKU09OXHJcbi8vICAgICBwdWJsaWMgVGltZVRhYmxlOlN0cnVjLlBvaW50ZXJMaXN0PHRpbWVOb2RlPlxyXG5cclxuLy8gICAgIHByaXZhdGUgdGltZTpudW1iZXJcclxuXHJcblxyXG5cclxuLy8gICAgIC8vIHB1YmxpYyBmcmFtZUxvb3A6TGF5YS50aW1lclxyXG4vLyAgICAgY29uc3RydWN0b3IoKXtcclxuLy8gICAgICAgICBzdXBlcigpXHJcbiAgICAgICAgXHJcbi8vICAgICAgICAgdGhpc1xyXG4vLyAgICAgICAgIExheWEubG9hZGVyLmxvYWQoW2dhbWVTZXRfanNvbiwgZW5lbXlEYXRhYmFzZV0sIExheWEuSGFuZGxlci5jcmVhdGUodGhpcywgdGhpcy5vbkxvYWRlZCksbnVsbCxMYXlhLkxvYWRlci5KU09OKVxyXG4vLyAgICAgICAgIC8v5Yqg6L295pWM5Lq65pWw5o2u5bqTXHJcbi8vICAgICAgICAgLy/liqDovb3lnLDlm74gIFxyXG4gICAgICAgIFxyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIHByaXZhdGUgb25Mb2FkZWQoKXsvL+WKoOi9veWujOaIkOWQjuaJp+ihjOatpOWHveaVsFxyXG5cclxuLy8gICAgICAgICB0aGlzLkdhbWVTZXQgPSBMYXlhLmxvYWRlci5nZXRSZXMoZ2FtZVNldF9qc29uKS8v6I635Y+W5bey5Yqg6L2955qE5Zyw5Zu+XHJcbi8vICAgICAgICAgdGhpcy5FbmVteURhdGFiYXNlID0gTGF5YS5sb2FkZXIuZ2V0UmVzKGVuZW15RGF0YWJhc2UpLy/ojrflj5blt7LliqDovb3nmoTmlYzkurrmlbDmja5cclxuLy8gICAgICAgICB0aGlzLmluaXRUaW1lVGFibGUoKS8v5LuO5Zyw5Zu+5pWw5o2u5Lit5Yqg6L295pe26Ze06KGoXHJcbi8vICAgICAgICAgdGhpcy50aW1lID0gMC8v5bCG5pe26Ze06K6+5Li6MDvml7bpl7TljZXkvY3kuLrluKdcclxuLy8gICAgICAgICB0aGlzLmdyaWRzID0gbmV3IEdyaWRzKHRoaXMuVUlTZXQsdGhpcyx0aGlzLkdhbWVTZXQpLy/kvp3mja7lt7LliqDovb3nmoTlnLDlm77mlbDmja7vvIzorr7nva7lnLDlm75cclxuLy8gICAgICAgICB0aGlzLmRvY3RvciA9IG5ldyBEb2N0b3IoKS8v5Yid5aeL5YyW5YiA5a6i5LuW5a+56LGhXHJcbi8vICAgICAgICAgdGhpcy5rZXlCb2FyZEV2ZW50U2V0dXAoKS8v5Yid5aeL5YyW6ZSu55uY5LqL5Lu2XHJcbi8vICAgICAgICAgLyoq5rWL6K+V5Luj56CBICovXHJcbi8vICAgICAgICAgLy8gdGhpcy5lbmVtaWVzLnB1c2gobmV3IEVuZW15KHRoaXMuVUlTZXQsIHRoaXMsIFwiYnVnMFwiLCBbXSkpXHJcbi8vICAgICAgICAgLyoq5rWL6K+V5Luj56CBRW5kICovXHJcblxyXG4vLyAgICAgICAgIExheWEudGltZXIubG9vcCgyMCx0aGlzLHRoaXMuZnJhbWVMb29wKS8v5byA5ZCv5ri45oiP5bin5b6q546vXHJcbi8vICAgICB9XHJcblxyXG4vLyAgICAgcHJpdmF0ZSBpbml0VGltZVRhYmxlKCl7XHJcbi8vICAgICAgICAgdGhpcy5UaW1lVGFibGUgPSBuZXcgU3RydWMuUG9pbnRlckxpc3Q8dGltZU5vZGU+KClcclxuLy8gICAgICAgICBjb25zdCByYXdUYWJsZTpBcnJheTxhbnk+ID0gdGhpcy5HYW1lU2V0W1widGltZXRhYmxlXCJdXHJcbi8vICAgICAgICAgcmF3VGFibGUuZm9yRWFjaCgoZWxlKT0+e1xyXG4vLyAgICAgICAgICAgICB0aGlzLlRpbWVUYWJsZS5wdXNoKHtcclxuLy8gICAgICAgICAgICAgICAgIHRpbWU6ZWxlLnRpbWUsXHJcbi8vICAgICAgICAgICAgICAgICB0eXBlOnRoaXMuRW5lbXlEYXRhYmFzZVtlbGUudHlwZV0sXHJcbi8vICAgICAgICAgICAgICAgICBwYXRoOnRoaXMuR2FtZVNldFtcInBhdGhzXCJdW2VsZS5wYXRoXVxyXG4vLyAgICAgICAgICAgICB9KVxyXG4vLyAgICAgICAgIH0pXHJcbi8vICAgICAgICAgbG9nKHRoaXMuVGltZVRhYmxlKVxyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIHByaXZhdGUga2V5Qm9hcmRFdmVudFNldHVwKCl7XHJcbi8vICAgICAgICAgdGhpcy5vbktleWRvd24gPSAoZTpMYXlhLkV2ZW50KSA9PiB7XHJcbi8vICAgICAgICAgICAgIC8qKua1i+ivleS7o+eggSAqL1xyXG4vLyAgICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09PSBMYXlhLktleWJvYXJkLkUpIHtcclxuLy8gICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZW5lbWllcylcclxuLy8gICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09PSBMYXlhLktleWJvYXJkLkYpIHtcclxuLy8gICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZW5lbWllc1swXSlcclxuLy8gICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgICAgICAvKirmtYvor5Xku6PnoIFFbmQgKi9cclxuLy8gICAgICAgICB9XHJcbi8vICAgICAgICAgTGF5YS5zdGFnZS5vbihMYXlhLkV2ZW50LktFWV9ET1dOLHRoaXMsdGhpcy5vbktleWRvd24pXHJcbi8vICAgICB9XHJcblxyXG5cclxuLy8gICAgIHB1YmxpYyBmcmFtZUxvb3AoKXsvL+avj+W4p+mDveS8muaJp+ihjOeahOS7o+eggeWdl1xyXG4vLyAgICAgICAgIGlmICh0aGlzLlRpbWVUYWJsZS5yZWFkKCkgJiYgdGhpcy50aW1lID09PSB0aGlzLlRpbWVUYWJsZS5yZWFkKCkudGltZSkge1xyXG4vLyAgICAgICAgICAgICB0aGlzLmVuZW1pZXMucHVzaChuZXcgRW5lbXkodGhpcy5VSVNldCx0aGlzLFxyXG4vLyAgICAgICAgICAgICAgICAgdGhpcy5UaW1lVGFibGUucmVhZCgpLnR5cGUsXHJcbi8vICAgICAgICAgICAgICAgICB0aGlzLlRpbWVUYWJsZS5yZWFkKCkucGF0aCkpXHJcbi8vICAgICAgICAgICAgIHRoaXMuVGltZVRhYmxlLnN0ZXAoKVxyXG4vLyAgICAgICAgIH1cclxuXHJcblxyXG4vLyAgICAgICAgIHRoaXMub3BlcmF0b3JzLmZvckVhY2goKGVsZSk9PnsvL+aJp+ihjOaJgOacieW5suWRmOWvueixoeeahHVwZGF0ZeaWueazlVxyXG4vLyAgICAgICAgICAgICBlbGUudXBkYXRlKClcclxuICAgICAgICAgICAgXHJcbi8vICAgICAgICAgfSlcclxuLy8gICAgICAgICB0aGlzLmVuZW1pZXMuZm9yRWFjaCgoZWxlKT0+ey8v5omn6KGM5omA5pyJ5pWM5Lq65a+56LGh55qEdXBkYXRl5pa55rOVXHJcbi8vICAgICAgICAgICAgIGVsZS51cGRhdGUoKVxyXG4vLyAgICAgICAgIH0pXHJcbi8vICAgICAgICAgdGhpcy50aW1lICsrXHJcbi8vICAgICB9XHJcblxyXG5cclxuXHJcbi8vICAgICBhZGRPcGVyYXRvcihwbGFjZTpudW1iZXJbXSl7Ly/lnKjlnLDlm77kuIrmt7vliqDlubLlkZhcclxuLy8gICAgICAgICAvL+atpOaWueazleiiq+S9nOS4uuWbnuiwg+WHveaVsOaPkOS+m+e7mXRoaXMuZ3JpZHPlr7nosaHvvIzlnKjngrnlh7vlnLDlm77nqbrmoLzml7bmiafooYxcclxuXHJcbi8vICAgICAgICAgdGhpcy5vcGVyYXRvcnMucHVzaChuZXcgT3BlcmF0b3IodGhpcyxwbGFjZSkpXHJcbiAgICAgICAgXHJcbi8vICAgICB9XHJcblxyXG4vLyB9IiwiaW1wb3J0IHt1aX0gZnJvbSBcIi4uL3VpL2xheWFNYXhVSVwiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMb2FkaW5nIGV4dGVuZHMgdWkuTG9hZGluZ1NjZW5lVUl7XHJcbiAgICBjb25zdHJ1Y3Rvcigpe1xyXG4gICAgICAgIHN1cGVyKClcclxuICAgICAgICBjb25zdCBnYW1lU2V0OnN0cmluZyA9IFwiLi9EYXRhYmFzZS9HYW1lU2V0Lmpzb25cIixcclxuICAgICAgICBlbmVteURhdGFiYXNlOnN0cmluZyA9IFwiLi9EYXRhYmFzZS9FbmVteURhdGFiYXNlLmpzb25cIixcclxuICAgICAgICBvcGVyYXRvckRhdGFiYXNlOnN0cmluZyA9IFwiLi9EYXRhYmFzZS9PcGVyYXRvckRhdGFiYXNlLmpzb25cIlxyXG4gICAgICAgIExheWEubG9hZGVyLmxvYWQoW2dhbWVTZXQsZW5lbXlEYXRhYmFzZSxvcGVyYXRvckRhdGFiYXNlXSxMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHRoaXMub25Mb2FkZWQpLG51bGwsTGF5YS5Mb2FkZXIuSlNPTilcclxuICAgIH1cclxuXHJcbiAgICBvbkxvYWRlZCgpe1xyXG4gICAgICAgIExheWEuU2NlbmUub3BlbihcIkdhbWVGaWVsZFNjZW5lLnNjZW5lXCIpXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coTGF5YS5sb2FkZXIpXHJcbiAgICB9XHJcbn0iLCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE15TWF0aHtcclxuICAgIHB1YmxpYyBzdGF0aWMgbW92ZVRvKGZyb250Om51bWJlciwgc2hpZnQ6bnVtYmVyLCBlbmQ6bnVtYmVyKTpudW1iZXIge1xyXG4gICAgICAgIGlmKHNoaWZ0PT09MCl7XHJcbiAgICAgICAgICAgIHJldHVybiBmcm9udFxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc2hpZnQ+MD9cclxuICAgICAgICAgICAgKChmcm9udCtzaGlmdCk+ZW5kP2VuZDpmcm9udCtzaGlmdCk6XHJcbiAgICAgICAgICAgICgoZnJvbnQrc2hpZnQpPGVuZD9lbmQ6ZnJvbnQrc2hpZnQpXHJcbiAgICB9XHJcblxyXG5cclxufVxyXG5cclxuXHJcbiIsIi8qKlRoaXMgY2xhc3MgaXMgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgYnkgTGF5YUFpcklERSwgcGxlYXNlIGRvIG5vdCBtYWtlIGFueSBtb2RpZmljYXRpb25zLiAqL1xuaW1wb3J0IFZpZXc9TGF5YS5WaWV3O1xyXG5pbXBvcnQgRGlhbG9nPUxheWEuRGlhbG9nO1xyXG5pbXBvcnQgU2NlbmU9TGF5YS5TY2VuZTtcbnZhciBSRUc6IEZ1bmN0aW9uID0gTGF5YS5DbGFzc1V0aWxzLnJlZ0NsYXNzO1xuZXhwb3J0IG1vZHVsZSB1aSB7XHJcbiAgICBleHBvcnQgY2xhc3MgR2FtZUZpZWxkU2NlbmVVSSBleHRlbmRzIFNjZW5lIHtcclxuXHRcdHB1YmxpYyBVSVNldDpMYXlhLlNwcml0ZTtcbiAgICAgICAgY29uc3RydWN0b3IoKXsgc3VwZXIoKX1cclxuICAgICAgICBjcmVhdGVDaGlsZHJlbigpOnZvaWQge1xyXG4gICAgICAgICAgICBzdXBlci5jcmVhdGVDaGlsZHJlbigpO1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRTY2VuZShcIkdhbWVGaWVsZFNjZW5lXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFJFRyhcInVpLkdhbWVGaWVsZFNjZW5lVUlcIixHYW1lRmllbGRTY2VuZVVJKTtcclxuICAgIGV4cG9ydCBjbGFzcyBMb2FkaW5nU2NlbmVVSSBleHRlbmRzIFNjZW5lIHtcclxuICAgICAgICBjb25zdHJ1Y3RvcigpeyBzdXBlcigpfVxyXG4gICAgICAgIGNyZWF0ZUNoaWxkcmVuKCk6dm9pZCB7XHJcbiAgICAgICAgICAgIHN1cGVyLmNyZWF0ZUNoaWxkcmVuKCk7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZFNjZW5lKFwiTG9hZGluZ1NjZW5lXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFJFRyhcInVpLkxvYWRpbmdTY2VuZVVJXCIsTG9hZGluZ1NjZW5lVUkpO1xyXG59XHIiXX0=
