var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Struc;
(function (Struc) {
    var PointerList = /** @class */ (function () {
        function PointerList(source, initPoint) {
            if (source === void 0) { source = []; }
            if (initPoint === void 0) { initPoint = 0; }
            var _this = this;
            this.list = [];
            this.pointer = 0;
            source.forEach(function (ele) {
                _this.list.push(ele);
            });
        }
        PointerList.prototype.read = function () {
            return this.list[this.pointer];
        };
        PointerList.prototype.step = function () {
            this.pointer += 1;
            return this;
        };
        PointerList.prototype.to = function (place) {
            this.pointer = place;
            return this;
        };
        PointerList.prototype.push = function (data) {
            this.list.push(data);
            return this;
        };
        PointerList.prototype.set = function (index, data) {
            this.list[index] = data;
            return this;
        };
        PointerList.prototype.next = function (shift) {
            if (shift === void 0) { shift = 1; }
            return this.list[this.pointer + shift];
        };
        Object.defineProperty(PointerList.prototype, "length", {
            get: function () {
                return this.list.length;
            },
            enumerable: true,
            configurable: true
        });
        return PointerList;
    }());
    Struc.PointerList = PointerList;
})(Struc = exports.Struc || (exports.Struc = {}));
},{}],2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */
var GameField_1 = require("./SceneScript/GameField");
var Loading_1 = require("./SceneScript/Loading");
/*
* 游戏初始化配置;
*/
var GameConfig = /** @class */ (function () {
    function GameConfig() {
    }
    GameConfig.init = function () {
        var reg = Laya.ClassUtils.regClass;
        reg("SceneScript/GameField.ts", GameField_1.default);
        reg("SceneScript/Loading.ts", Loading_1.default);
    };
    GameConfig.width = 1400;
    GameConfig.height = 900;
    GameConfig.scaleMode = "noscale";
    GameConfig.screenMode = "none";
    GameConfig.alignV = "top";
    GameConfig.alignH = "left";
    GameConfig.startScene = "LoadingScene.scene";
    GameConfig.sceneRoot = "";
    GameConfig.debug = false;
    GameConfig.stat = false;
    GameConfig.physicsDebug = false;
    GameConfig.exportSceneToJson = true;
    return GameConfig;
}());
exports.default = GameConfig;
GameConfig.init();
},{"./SceneScript/GameField":6,"./SceneScript/Loading":7}],3:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var DataStructure_1 = require("../DataStructure");
var gameSet_URL = "./Database/GameSet.json", enemyDatabase_URL = "./Database/EnemyDatabase.json", operatorDatabase_URL = "./Database/OperatorDatabase.json";
var Database = /** @class */ (function () {
    function Database() {
        this.enemyData = Laya.loader.getRes(enemyDatabase_URL);
        this.operatorData = Laya.loader.getRes(operatorDatabase_URL);
        this.gameSet = Laya.loader.getRes(gameSet_URL);
        this.initTimeTable();
        console.log(this);
    }
    Database.prototype.initTimeTable = function () {
        var _this = this;
        this.timeTable = new DataStructure_1.Struc.PointerList();
        this.gameSet["timetableBref"].forEach(function (element) {
            var time = element["time"];
            var type = _this.enemyData[element["type"]];
            var path = _this.gameSet["paths"][element.path];
            _this.timeTable.push({ time: time, type: type, path: path });
        });
    };
    return Database;
}());
exports.default = Database;
},{"../DataStructure":1}],4:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Grids = /** @class */ (function () {
    function Grids(father, upperPath, database) {
        this.Map = [];
        this.RecMap = [];
        this.database = database;
        // this.father = father
        // this.upperPath = upperPath
        // this.data = data
        // let cols = data["ground"]["width"],
        // raws = data["ground"]["height"]
        // for (let n = 0; n < raws; n += 1) {
        //     this.Map[n] = []
        //     this.RecMap[n] = []
        //     for (let m = 0; m < cols; m += 1) {
        //         this.initElement(n,m)
        //     }
        // }
        // console.log(this.RecMap)
    }
    Grids.prototype.initElement = function (raw, count) {
        var current = Laya.Sprite.fromImage("Basic/Rec.png"); //载入图片
        current.pos(Grids.size * count, Grids.size * raw)
            .size(Grids.size, Grids.size); //依据static size属性改变大小、依据编号改变位置
        current.name = "grid" + raw + "-" + count; //重命名为 grid行数-列数
        this.Map[raw][count] = current;
        this.RecMap[raw][count] = new Laya.Rectangle(current.x, current.y, Grids.size, Grids.size);
        // current.on(Laya.Event.CLICK, this.upperPath, this.upperPath.addOperator, [this.getPlace(count,raw)])//设定鼠标点击事件
        //向GameField中添加Operator实例
        this.father.addChild(current);
    };
    Grids.prototype.getPlace = function (count, raw) {
        //raw:第几行
        //count:第几个
        return [
            this.RecMap[raw][count].x,
            this.RecMap[raw][count].y
        ];
    };
    Grids.size = 90;
    return Grids;
}());
exports.Grids = Grids;
},{}],5:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var GameConfig_1 = require("./GameConfig");
var Main = /** @class */ (function () {
    function Main() {
        //根据IDE设置初始化引擎		
        if (window["Laya3D"])
            Laya3D.init(GameConfig_1.default.width, GameConfig_1.default.height);
        else
            Laya.init(GameConfig_1.default.width, GameConfig_1.default.height, Laya["WebGL"]);
        Laya["Physics"] && Laya["Physics"].enable();
        Laya["DebugPanel"] && Laya["DebugPanel"].enable();
        Laya.stage.scaleMode = GameConfig_1.default.scaleMode;
        Laya.stage.screenMode = GameConfig_1.default.screenMode;
        //兼容微信不支持加载scene后缀场景
        Laya.URL.exportSceneToJson = GameConfig_1.default.exportSceneToJson;
        //打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）
        if (GameConfig_1.default.debug || Laya.Utils.getQueryString("debug") == "true")
            Laya.enableDebugPanel();
        if (GameConfig_1.default.physicsDebug && Laya["PhysicsDebugDraw"])
            Laya["PhysicsDebugDraw"].enable();
        if (GameConfig_1.default.stat)
            Laya.Stat.show();
        Laya.alertGlobalError = true;
        //激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程
        Laya.ResourceVersion.enable("version.json", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);
    }
    Main.prototype.onVersionLoaded = function () {
        //激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图
        Laya.AtlasInfoManager.enable("fileconfig.json", Laya.Handler.create(this, this.onConfigLoaded));
    };
    Main.prototype.onConfigLoaded = function () {
        //加载IDE指定的场景
        GameConfig_1.default.startScene && Laya.Scene.open(GameConfig_1.default.startScene);
    };
    return Main;
}());
//激活启动类
new Main();
},{"./GameConfig":2}],6:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var layaMaxUI_1 = require("../ui/layaMaxUI");
var Grids_1 = require("../GameObj/Grids");
var Database_1 = require("../GameObj/Database");
var log = console.log;
var GameField = /** @class */ (function (_super) {
    __extends(GameField, _super);
    function GameField() {
        var _this = _super.call(this) || this;
        _this.database = new Database_1.default();
        _this.grids = new Grids_1.Grids(_this.UISet, _this, _this.database);
        return _this;
    }
    return GameField;
}(layaMaxUI_1.ui.GameFieldSceneUI));
exports.default = GameField;
// export default class GameField extends ui.GameFieldSceneUI{
//     /**
//      * sb
//      */
//     public grids:Grids
//     public doctor:Doctor
//     public operators:Array<Operator> = []
//     public enemies:Array<Enemy> = []
//     private onKeydown:Function
//     public GameSet:JSON
//     public EnemyDatabase:JSON
//     public TimeTable:Struc.PointerList<timeNode>
//     private time:number
//     // public frameLoop:Laya.timer
//     constructor(){
//         super()
//         this
//         Laya.loader.load([gameSet_json, enemyDatabase], Laya.Handler.create(this, this.onLoaded),null,Laya.Loader.JSON)
//         //加载敌人数据库
//         //加载地图  
//     }
//     private onLoaded(){//加载完成后执行此函数
//         this.GameSet = Laya.loader.getRes(gameSet_json)//获取已加载的地图
//         this.EnemyDatabase = Laya.loader.getRes(enemyDatabase)//获取已加载的敌人数据
//         this.initTimeTable()//从地图数据中加载时间表
//         this.time = 0//将时间设为0;时间单位为帧
//         this.grids = new Grids(this.UISet,this,this.GameSet)//依据已加载的地图数据，设置地图
//         this.doctor = new Doctor()//初始化刀客他对象
//         this.keyBoardEventSetup()//初始化键盘事件
//         /**测试代码 */
//         // this.enemies.push(new Enemy(this.UISet, this, "bug0", []))
//         /**测试代码End */
//         Laya.timer.loop(20,this,this.frameLoop)//开启游戏帧循环
//     }
//     private initTimeTable(){
//         this.TimeTable = new Struc.PointerList<timeNode>()
//         const rawTable:Array<any> = this.GameSet["timetable"]
//         rawTable.forEach((ele)=>{
//             this.TimeTable.push({
//                 time:ele.time,
//                 type:this.EnemyDatabase[ele.type],
//                 path:this.GameSet["paths"][ele.path]
//             })
//         })
//         log(this.TimeTable)
//     }
//     private keyBoardEventSetup(){
//         this.onKeydown = (e:Laya.Event) => {
//             /**测试代码 */
//             if (e.keyCode === Laya.Keyboard.E) {
//                 console.log(this.enemies)
//             }
//             if (e.keyCode === Laya.Keyboard.F) {
//                 console.log(this.enemies[0])
//             }
//             /**测试代码End */
//         }
//         Laya.stage.on(Laya.Event.KEY_DOWN,this,this.onKeydown)
//     }
//     public frameLoop(){//每帧都会执行的代码块
//         if (this.TimeTable.read() && this.time === this.TimeTable.read().time) {
//             this.enemies.push(new Enemy(this.UISet,this,
//                 this.TimeTable.read().type,
//                 this.TimeTable.read().path))
//             this.TimeTable.step()
//         }
//         this.operators.forEach((ele)=>{//执行所有干员对象的update方法
//             ele.update()
//         })
//         this.enemies.forEach((ele)=>{//执行所有敌人对象的update方法
//             ele.update()
//         })
//         this.time ++
//     }
//     addOperator(place:number[]){//在地图上添加干员
//         //此方法被作为回调函数提供给this.grids对象，在点击地图空格时执行
//         this.operators.push(new Operator(this,place))
//     }
// }
},{"../GameObj/Database":3,"../GameObj/Grids":4,"../ui/layaMaxUI":8}],7:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var layaMaxUI_1 = require("../ui/layaMaxUI");
var Loading = /** @class */ (function (_super) {
    __extends(Loading, _super);
    function Loading() {
        var _this = _super.call(this) || this;
        var gameSet = "./Database/GameSet.json", enemyDatabase = "./Database/EnemyDatabase.json", operatorDatabase = "./Database/OperatorDatabase.json";
        Laya.loader.load([gameSet, enemyDatabase, operatorDatabase], Laya.Handler.create(_this, _this.onLoaded), null, Laya.Loader.JSON);
        return _this;
    }
    Loading.prototype.onLoaded = function () {
        Laya.Scene.open("GameFieldScene.scene");
        // console.log(Laya.loader)
    };
    return Loading;
}(layaMaxUI_1.ui.LoadingSceneUI));
exports.default = Loading;
},{"../ui/layaMaxUI":8}],8:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Scene = Laya.Scene;
var REG = Laya.ClassUtils.regClass;
var ui;
(function (ui) {
    var GameFieldSceneUI = /** @class */ (function (_super) {
        __extends(GameFieldSceneUI, _super);
        function GameFieldSceneUI() {
            return _super.call(this) || this;
        }
        GameFieldSceneUI.prototype.createChildren = function () {
            _super.prototype.createChildren.call(this);
            this.loadScene("GameFieldScene");
        };
        return GameFieldSceneUI;
    }(Scene));
    ui.GameFieldSceneUI = GameFieldSceneUI;
    REG("ui.GameFieldSceneUI", GameFieldSceneUI);
    var LoadingSceneUI = /** @class */ (function (_super) {
        __extends(LoadingSceneUI, _super);
        function LoadingSceneUI() {
            return _super.call(this) || this;
        }
        LoadingSceneUI.prototype.createChildren = function () {
            _super.prototype.createChildren.call(this);
            this.loadScene("LoadingScene");
        };
        return LoadingSceneUI;
    }(Scene));
    ui.LoadingSceneUI = LoadingSceneUI;
    REG("ui.LoadingSceneUI", LoadingSceneUI);
})(ui = exports.ui || (exports.ui = {}));
},{}]},{},[5])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xheWEvTGF5YUFpcklERS9yZXNvdXJjZXMvYXBwL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvRGF0YVN0cnVjdHVyZS50cyIsInNyYy9HYW1lQ29uZmlnLnRzIiwic3JjL0dhbWVPYmovRGF0YWJhc2UudHMiLCJzcmMvR2FtZU9iai9Hcmlkcy50cyIsInNyYy9NYWluLnRzIiwic3JjL1NjZW5lU2NyaXB0L0dhbWVGaWVsZC50cyIsInNyYy9TY2VuZVNjcmlwdC9Mb2FkaW5nLnRzIiwic3JjL3VpL2xheWFNYXhVSS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNUQSxJQUFjLEtBQUssQ0EyQ2xCO0FBM0NELFdBQWMsS0FBSztJQUdmO1FBR0kscUJBQVksTUFBb0IsRUFBRSxTQUFvQjtZQUExQyx1QkFBQSxFQUFBLFdBQW9CO1lBQUUsMEJBQUEsRUFBQSxhQUFvQjtZQUF0RCxpQkFJQztZQU5PLFNBQUksR0FBWSxFQUFFLENBQUE7WUFDbEIsWUFBTyxHQUFVLENBQUMsQ0FBQTtZQUV0QixNQUFNLENBQUMsT0FBTyxDQUFDLFVBQUMsR0FBRztnQkFDZixLQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQTtZQUN2QixDQUFDLENBQUMsQ0FBQTtRQUNOLENBQUM7UUFDRCwwQkFBSSxHQUFKO1lBQ0ksT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQTtRQUNsQyxDQUFDO1FBRUQsMEJBQUksR0FBSjtZQUNJLElBQUksQ0FBQyxPQUFPLElBQUUsQ0FBQyxDQUFBO1lBQ2YsT0FBTyxJQUFJLENBQUE7UUFDZixDQUFDO1FBRUQsd0JBQUUsR0FBRixVQUFHLEtBQVk7WUFDWCxJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQTtZQUNwQixP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QUFDNUMsQ0FBQyxFQWxCYSxFQUFFLEdBQUYsVUFBRSxLQUFGLFVBQUUsUUFrQmYiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG4oZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiXHJcbmV4cG9ydCBtb2R1bGUgU3RydWN7XHJcbiAgICBcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgUG9pbnRlckxpc3Q8RT57XHJcbiAgICAgICAgcHJpdmF0ZSBsaXN0OkFycmF5PEU+ID0gW11cclxuICAgICAgICBwcml2YXRlIHBvaW50ZXI6bnVtYmVyID0gMFxyXG4gICAgICAgIGNvbnN0cnVjdG9yKHNvdXJjZTpBcnJheTxFPiA9IFtdLCBpbml0UG9pbnQ6bnVtYmVyID0gMCl7XHJcbiAgICAgICAgICAgIHNvdXJjZS5mb3JFYWNoKChlbGUpPT57XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpc3QucHVzaChlbGUpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJlYWQoKTpFe1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5saXN0W3RoaXMucG9pbnRlcl1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0ZXAoKTpQb2ludGVyTGlzdDxFPntcclxuICAgICAgICAgICAgdGhpcy5wb2ludGVyKz0xXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0byhwbGFjZTpudW1iZXIpOlBvaW50ZXJMaXN0PEU+e1xyXG4gICAgICAgICAgICB0aGlzLnBvaW50ZXIgPSBwbGFjZVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpc1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVzaChkYXRhOkUpOlBvaW50ZXJMaXN0PEU+e1xyXG4gICAgICAgICAgICB0aGlzLmxpc3QucHVzaChkYXRhKVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpc1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2V0KGluZGV4Om51bWJlcixkYXRhOkUpOlBvaW50ZXJMaXN0PEU+e1xyXG4gICAgICAgICAgICB0aGlzLmxpc3RbaW5kZXhdID0gZGF0YVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpc1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBuZXh0KHNoaWZ0Om51bWJlciA9IDEpOkV7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxpc3RbdGhpcy5wb2ludGVyK3NoaWZ0XVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZ2V0IGxlbmd0aCgpOm51bWJlcntcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGlzdC5sZW5ndGhcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCIvKipUaGlzIGNsYXNzIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGJ5IExheWFBaXJJREUsIHBsZWFzZSBkbyBub3QgbWFrZSBhbnkgbW9kaWZpY2F0aW9ucy4gKi9cclxuaW1wb3J0IEdhbWVGaWVsZCBmcm9tIFwiLi9TY2VuZVNjcmlwdC9HYW1lRmllbGRcIlxuaW1wb3J0IExvYWRpbmcgZnJvbSBcIi4vU2NlbmVTY3JpcHQvTG9hZGluZ1wiXHJcbi8qXHJcbiog5ri45oiP5Yid5aeL5YyW6YWN572uO1xyXG4qL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lQ29uZmlne1xyXG4gICAgc3RhdGljIHdpZHRoOm51bWJlcj0xNDAwO1xyXG4gICAgc3RhdGljIGhlaWdodDpudW1iZXI9OTAwO1xyXG4gICAgc3RhdGljIHNjYWxlTW9kZTpzdHJpbmc9XCJub3NjYWxlXCI7XHJcbiAgICBzdGF0aWMgc2NyZWVuTW9kZTpzdHJpbmc9XCJub25lXCI7XHJcbiAgICBzdGF0aWMgYWxpZ25WOnN0cmluZz1cInRvcFwiO1xyXG4gICAgc3RhdGljIGFsaWduSDpzdHJpbmc9XCJsZWZ0XCI7XHJcbiAgICBzdGF0aWMgc3RhcnRTY2VuZTphbnk9XCJMb2FkaW5nU2NlbmUuc2NlbmVcIjtcclxuICAgIHN0YXRpYyBzY2VuZVJvb3Q6c3RyaW5nPVwiXCI7XHJcbiAgICBzdGF0aWMgZGVidWc6Ym9vbGVhbj1mYWxzZTtcclxuICAgIHN0YXRpYyBzdGF0OmJvb2xlYW49ZmFsc2U7XHJcbiAgICBzdGF0aWMgcGh5c2ljc0RlYnVnOmJvb2xlYW49ZmFsc2U7XHJcbiAgICBzdGF0aWMgZXhwb3J0U2NlbmVUb0pzb246Ym9vbGVhbj10cnVlO1xyXG4gICAgY29uc3RydWN0b3IoKXt9XHJcbiAgICBzdGF0aWMgaW5pdCgpe1xyXG4gICAgICAgIHZhciByZWc6IEZ1bmN0aW9uID0gTGF5YS5DbGFzc1V0aWxzLnJlZ0NsYXNzO1xyXG4gICAgICAgIHJlZyhcIlNjZW5lU2NyaXB0L0dhbWVGaWVsZC50c1wiLEdhbWVGaWVsZCk7XG4gICAgICAgIHJlZyhcIlNjZW5lU2NyaXB0L0xvYWRpbmcudHNcIixMb2FkaW5nKTtcclxuICAgIH1cclxufVxyXG5HYW1lQ29uZmlnLmluaXQoKTsiLCJpbXBvcnQge1N0cnVjfSBmcm9tIFwiLi4vRGF0YVN0cnVjdHVyZVwiXHJcblxyXG5cclxuY29uc3QgZ2FtZVNldF9VUkw6c3RyaW5nID0gXCIuL0RhdGFiYXNlL0dhbWVTZXQuanNvblwiLFxyXG5lbmVteURhdGFiYXNlX1VSTDpzdHJpbmcgPSBcIi4vRGF0YWJhc2UvRW5lbXlEYXRhYmFzZS5qc29uXCIsXHJcbm9wZXJhdG9yRGF0YWJhc2VfVVJMOnN0cmluZyA9IFwiLi9EYXRhYmFzZS9PcGVyYXRvckRhdGFiYXNlLmpzb25cIlxyXG5cclxuXHJcbnR5cGUgRW5lbXlEYXRhID0ge1xyXG4gICAgbmFtZTpzdHJpbmcsXHJcbiAgICBzcGVlZDpudW1iZXJcclxufVxyXG5cclxudHlwZSBFbmVteUV2ZW50ID0ge1xyXG4gICAgdGltZTpudW1iZXIsXHJcbiAgICB0eXBlOkVuZW15RGF0YSxcclxuICAgIHBhdGg6bnVtYmVyW11bXVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEYXRhYmFzZXtcclxuICAgIHByaXZhdGUgZW5lbXlEYXRhOkpTT05cclxuICAgIHByaXZhdGUgb3BlcmF0b3JEYXRhOkpTT05cclxuICAgIHByaXZhdGUgZ2FtZVNldDpKU09OXHJcblxyXG4gICAgcHJpdmF0ZSB0aW1lVGFibGU6U3RydWMuUG9pbnRlckxpc3Q8RW5lbXlFdmVudD5cclxuICAgIGNvbnN0cnVjdG9yKCl7XHJcbiAgICAgICAgdGhpcy5lbmVteURhdGEgPSBMYXlhLmxvYWRlci5nZXRSZXMoZW5lbXlEYXRhYmFzZV9VUkwpXHJcbiAgICAgICAgdGhpcy5vcGVyYXRvckRhdGEgPSBMYXlhLmxvYWRlci5nZXRSZXMob3BlcmF0b3JEYXRhYmFzZV9VUkwpXHJcbiAgICAgICAgdGhpcy5nYW1lU2V0ID0gTGF5YS5sb2FkZXIuZ2V0UmVzKGdhbWVTZXRfVVJMKVxyXG4gICAgICAgIHRoaXMuaW5pdFRpbWVUYWJsZSgpXHJcbiAgICAgICAgY29uc29sZS5sb2codGhpcylcclxuICAgIH1cclxuICAgIHByaXZhdGUgaW5pdFRpbWVUYWJsZSgpe1xyXG4gICAgICAgIHRoaXMudGltZVRhYmxlID0gbmV3IFN0cnVjLlBvaW50ZXJMaXN0PEVuZW15RXZlbnQ+KClcclxuICAgICAgICB0aGlzLmdhbWVTZXRbXCJ0aW1ldGFibGVCcmVmXCJdLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRpbWU6bnVtYmVyID0gZWxlbWVudFtcInRpbWVcIl1cclxuICAgICAgICAgICAgY29uc3QgdHlwZTpFbmVteURhdGEgPSB0aGlzLmVuZW15RGF0YVtlbGVtZW50W1widHlwZVwiXV1cclxuICAgICAgICAgICAgY29uc3QgcGF0aDpudW1iZXJbXVtdID0gdGhpcy5nYW1lU2V0W1wicGF0aHNcIl1bZWxlbWVudC5wYXRoXVxyXG4gICAgICAgICAgICB0aGlzLnRpbWVUYWJsZS5wdXNoKHt0aW1lLHR5cGUscGF0aH0pXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgR2FtZUZpZWxkIGZyb20gXCIuLi9TY2VuZVNjcmlwdC9HYW1lRmllbGRcIjtcclxuaW1wb3J0IERhdGFiYXNlIGZyb20gXCIuL0RhdGFiYXNlXCJcclxuXHJcbmV4cG9ydCBjbGFzcyBHcmlkc3tcclxuICAgIHB1YmxpYyBNYXA6QXJyYXk8QXJyYXk8TGF5YS5TcHJpdGU+PiA9IFtdXHJcbiAgICBwdWJsaWMgUmVjTWFwOkFycmF5PEFycmF5PExheWEuUmVjdGFuZ2xlPj4gPSBbXVxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgc2l6ZTpudW1iZXIgPSA5MFxyXG4gICAgcHJpdmF0ZSBmYXRoZXI6TGF5YS5TcHJpdGVcclxuICAgIHByaXZhdGUgdXBwZXJQYXRoOkdhbWVGaWVsZFxyXG4gICAgcHJpdmF0ZSBkYXRhOkpTT05cclxuICAgIC8vb2xkXHJcbiAgICAvL25ld1xyXG4gICAgcHJpdmF0ZSBkYXRhYmFzZTpEYXRhYmFzZVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGZhdGhlcjpMYXlhLlNwcml0ZSwgdXBwZXJQYXRoOkdhbWVGaWVsZCwgZGF0YWJhc2U6RGF0YWJhc2Upe1xyXG4gICAgICAgIHRoaXMuZGF0YWJhc2UgPSBkYXRhYmFzZVxyXG4gICAgICAgIC8vIHRoaXMuZmF0aGVyID0gZmF0aGVyXHJcbiAgICAgICAgLy8gdGhpcy51cHBlclBhdGggPSB1cHBlclBhdGhcclxuICAgICAgICAvLyB0aGlzLmRhdGEgPSBkYXRhXHJcbiAgICAgICAgLy8gbGV0IGNvbHMgPSBkYXRhW1wiZ3JvdW5kXCJdW1wid2lkdGhcIl0sXHJcbiAgICAgICAgLy8gcmF3cyA9IGRhdGFbXCJncm91bmRcIl1bXCJoZWlnaHRcIl1cclxuICAgICAgICBcclxuICAgICAgICAvLyBmb3IgKGxldCBuID0gMDsgbiA8IHJhd3M7IG4gKz0gMSkge1xyXG4gICAgICAgIC8vICAgICB0aGlzLk1hcFtuXSA9IFtdXHJcbiAgICAgICAgLy8gICAgIHRoaXMuUmVjTWFwW25dID0gW11cclxuICAgICAgICAvLyAgICAgZm9yIChsZXQgbSA9IDA7IG0gPCBjb2xzOyBtICs9IDEpIHtcclxuICAgICAgICAvLyAgICAgICAgIHRoaXMuaW5pdEVsZW1lbnQobixtKVxyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuUmVjTWFwKVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBpbml0RWxlbWVudChyYXc6bnVtYmVyLGNvdW50Om51bWJlcil7XHJcbiAgICAgICAgY29uc3QgY3VycmVudDpMYXlhLlNwcml0ZSA9IExheWEuU3ByaXRlLmZyb21JbWFnZShcIkJhc2ljL1JlYy5wbmdcIik7Ly/ovb3lhaXlm77niYdcclxuICAgICAgICBjdXJyZW50LnBvcyhHcmlkcy5zaXplKmNvdW50LCBHcmlkcy5zaXplKnJhdylcclxuICAgICAgICAgICAgLnNpemUoR3JpZHMuc2l6ZSxHcmlkcy5zaXplKS8v5L6d5o2uc3RhdGljIHNpemXlsZ7mgKfmlLnlj5jlpKflsI/jgIHkvp3mja7nvJblj7fmlLnlj5jkvY3nva5cclxuICAgICAgICBjdXJyZW50Lm5hbWUgPSBgZ3JpZCR7cmF3fS0ke2NvdW50fWAvL+mHjeWRveWQjeS4uiBncmlk6KGM5pWwLeWIl+aVsFxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuTWFwW3Jhd11bY291bnRdID0gY3VycmVudFxyXG4gICAgICAgIHRoaXMuUmVjTWFwW3Jhd11bY291bnRdID0gbmV3IExheWEuUmVjdGFuZ2xlKGN1cnJlbnQueCxjdXJyZW50LnksR3JpZHMuc2l6ZSxHcmlkcy5zaXplKVxyXG4gICAgICAgIC8vIGN1cnJlbnQub24oTGF5YS5FdmVudC5DTElDSywgdGhpcy51cHBlclBhdGgsIHRoaXMudXBwZXJQYXRoLmFkZE9wZXJhdG9yLCBbdGhpcy5nZXRQbGFjZShjb3VudCxyYXcpXSkvL+iuvuWumum8oOagh+eCueWHu+S6i+S7tlxyXG4gICAgICAgIC8v5ZCRR2FtZUZpZWxk5Lit5re75YqgT3BlcmF0b3Llrp7kvotcclxuICAgICAgICB0aGlzLmZhdGhlci5hZGRDaGlsZChjdXJyZW50KVxyXG4gICAgfVxyXG5cclxuICAgIGdldFBsYWNlKGNvdW50Om51bWJlcixyYXc6bnVtYmVyKTpudW1iZXJbXXtcclxuICAgICAgICAvL3JhdzrnrKzlh6DooYxcclxuICAgICAgICAvL2NvdW50OuesrOWHoOS4qlxyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIHRoaXMuUmVjTWFwW3Jhd11bY291bnRdLngsXHJcbiAgICAgICAgICAgIHRoaXMuUmVjTWFwW3Jhd11bY291bnRdLnlcclxuICAgICAgICBdXHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuXHJcbiIsImltcG9ydCBHYW1lQ29uZmlnIGZyb20gXCIuL0dhbWVDb25maWdcIjtcclxuY2xhc3MgTWFpbiB7XHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHQvL+agueaNrklEReiuvue9ruWIneWni+WMluW8leaTjlx0XHRcclxuXHRcdGlmICh3aW5kb3dbXCJMYXlhM0RcIl0pIExheWEzRC5pbml0KEdhbWVDb25maWcud2lkdGgsIEdhbWVDb25maWcuaGVpZ2h0KTtcclxuXHRcdGVsc2UgTGF5YS5pbml0KEdhbWVDb25maWcud2lkdGgsIEdhbWVDb25maWcuaGVpZ2h0LCBMYXlhW1wiV2ViR0xcIl0pO1xyXG5cdFx0TGF5YVtcIlBoeXNpY3NcIl0gJiYgTGF5YVtcIlBoeXNpY3NcIl0uZW5hYmxlKCk7XHJcblx0XHRMYXlhW1wiRGVidWdQYW5lbFwiXSAmJiBMYXlhW1wiRGVidWdQYW5lbFwiXS5lbmFibGUoKTtcclxuXHRcdExheWEuc3RhZ2Uuc2NhbGVNb2RlID0gR2FtZUNvbmZpZy5zY2FsZU1vZGU7XHJcblx0XHRMYXlhLnN0YWdlLnNjcmVlbk1vZGUgPSBHYW1lQ29uZmlnLnNjcmVlbk1vZGU7XHJcblx0XHQvL+WFvOWuueW+ruS/oeS4jeaUr+aMgeWKoOi9vXNjZW5l5ZCO57yA5Zy65pmvXHJcblx0XHRMYXlhLlVSTC5leHBvcnRTY2VuZVRvSnNvbiA9IEdhbWVDb25maWcuZXhwb3J0U2NlbmVUb0pzb247XHJcblxyXG5cdFx0Ly/miZPlvIDosIPor5XpnaLmnb/vvIjpgJrov4dJREXorr7nva7osIPor5XmqKHlvI/vvIzmiJbogIV1cmzlnLDlnYDlop7liqBkZWJ1Zz10cnVl5Y+C5pWw77yM5Z2H5Y+v5omT5byA6LCD6K+V6Z2i5p2/77yJXHJcblx0XHRpZiAoR2FtZUNvbmZpZy5kZWJ1ZyB8fCBMYXlhLlV0aWxzLmdldFF1ZXJ5U3RyaW5nKFwiZGVidWdcIikgPT0gXCJ0cnVlXCIpIExheWEuZW5hYmxlRGVidWdQYW5lbCgpO1xyXG5cdFx0aWYgKEdhbWVDb25maWcucGh5c2ljc0RlYnVnICYmIExheWFbXCJQaHlzaWNzRGVidWdEcmF3XCJdKSBMYXlhW1wiUGh5c2ljc0RlYnVnRHJhd1wiXS5lbmFibGUoKTtcclxuXHRcdGlmIChHYW1lQ29uZmlnLnN0YXQpIExheWEuU3RhdC5zaG93KCk7XHJcblx0XHRMYXlhLmFsZXJ0R2xvYmFsRXJyb3IgPSB0cnVlO1xyXG5cclxuXHRcdC8v5r+A5rS76LWE5rqQ54mI5pys5o6n5Yi277yMdmVyc2lvbi5qc29u55SxSURF5Y+R5biD5Yqf6IO96Ieq5Yqo55Sf5oiQ77yM5aaC5p6c5rKh5pyJ5Lmf5LiN5b2x5ZON5ZCO57ut5rWB56iLXHJcblx0XHRMYXlhLlJlc291cmNlVmVyc2lvbi5lbmFibGUoXCJ2ZXJzaW9uLmpzb25cIiwgTGF5YS5IYW5kbGVyLmNyZWF0ZSh0aGlzLCB0aGlzLm9uVmVyc2lvbkxvYWRlZCksIExheWEuUmVzb3VyY2VWZXJzaW9uLkZJTEVOQU1FX1ZFUlNJT04pO1xyXG5cdH1cclxuXHJcblx0b25WZXJzaW9uTG9hZGVkKCk6IHZvaWQge1xyXG5cdFx0Ly/mv4DmtLvlpKflsI/lm77mmKDlsITvvIzliqDovb3lsI/lm77nmoTml7blgJnvvIzlpoLmnpzlj5HnjrDlsI/lm77lnKjlpKflm77lkIjpm4bph4zpnaLvvIzliJnkvJjlhYjliqDovb3lpKflm77lkIjpm4bvvIzogIzkuI3mmK/lsI/lm75cclxuXHRcdExheWEuQXRsYXNJbmZvTWFuYWdlci5lbmFibGUoXCJmaWxlY29uZmlnLmpzb25cIiwgTGF5YS5IYW5kbGVyLmNyZWF0ZSh0aGlzLCB0aGlzLm9uQ29uZmlnTG9hZGVkKSk7XHJcblx0fVxyXG5cclxuXHRvbkNvbmZpZ0xvYWRlZCgpOiB2b2lkIHtcclxuXHRcdC8v5Yqg6L29SURF5oyH5a6a55qE5Zy65pmvXHJcblx0XHRHYW1lQ29uZmlnLnN0YXJ0U2NlbmUgJiYgTGF5YS5TY2VuZS5vcGVuKEdhbWVDb25maWcuc3RhcnRTY2VuZSk7XHJcblx0fVxyXG59XHJcbi8v5r+A5rS75ZCv5Yqo57G7XHJcbm5ldyBNYWluKCk7XHJcbiIsImltcG9ydCB7dWl9IGZyb20gXCIuLi91aS9sYXlhTWF4VUlcIlxyXG5pbXBvcnQgRW5lbXkgZnJvbSBcIi4uL0dhbWVPYmovRW5lbXlcIlxyXG5pbXBvcnQge0dyaWRzfSBmcm9tIFwiLi4vR2FtZU9iai9Hcmlkc1wiXHJcbmltcG9ydCBEb2N0b3IgZnJvbSBcIi4uL0dhbWVPYmovRG9jdG9yXCJcclxuaW1wb3J0IE9wZXJhdG9yIGZyb20gXCIuLi9HYW1lT2JqL09wZXJhdG9yXCJcclxuaW1wb3J0IHtTdHJ1Y30gZnJvbSBcIi4uL0RhdGFTdHJ1Y3R1cmVcIlxyXG5pbXBvcnQgRGF0YWJhc2UgZnJvbSBcIi4uL0dhbWVPYmovRGF0YWJhc2VcIlxyXG5jb25zdCB7bG9nfSA9IGNvbnNvbGU7XHJcblxyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVGaWVsZCBleHRlbmRzIHVpLkdhbWVGaWVsZFNjZW5lVUl7XHJcbiAgICBcclxuICAgIHB1YmxpYyBkYXRhYmFzZTpEYXRhYmFzZVxyXG4gICAgcHVibGljIGdyaWRzOkdyaWRzXHJcbiAgICBwcml2YXRlIGVuZW1pZXM6RW5lbXlbXVxyXG4gICAgcHJpdmF0ZSBvcGVyYXRvcnM6T3BlcmF0b3JbXVxyXG4gICAgcHJpdmF0ZSBkb2N0b3I6RG9jdG9yIFxyXG5cclxuICAgIGNvbnN0cnVjdG9yKCl7XHJcbiAgICAgICAgc3VwZXIoKVxyXG4gICAgICAgIHRoaXMuZGF0YWJhc2UgPSBuZXcgRGF0YWJhc2UoKVxyXG4gICAgICAgIHRoaXMuZ3JpZHMgPSBuZXcgR3JpZHModGhpcy5VSVNldCx0aGlzLHRoaXMuZGF0YWJhc2UpXHJcbiAgICB9XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbn1cclxuLy8gZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZUZpZWxkIGV4dGVuZHMgdWkuR2FtZUZpZWxkU2NlbmVVSXtcclxuLy8gICAgIC8qKlxyXG4vLyAgICAgICogc2JcclxuLy8gICAgICAqL1xyXG4vLyAgICAgcHVibGljIGdyaWRzOkdyaWRzXHJcbi8vICAgICBwdWJsaWMgZG9jdG9yOkRvY3RvclxyXG4vLyAgICAgcHVibGljIG9wZXJhdG9yczpBcnJheTxPcGVyYXRvcj4gPSBbXVxyXG4vLyAgICAgcHVibGljIGVuZW1pZXM6QXJyYXk8RW5lbXk+ID0gW11cclxuLy8gICAgIHByaXZhdGUgb25LZXlkb3duOkZ1bmN0aW9uXHJcblxyXG4vLyAgICAgcHVibGljIEdhbWVTZXQ6SlNPTlxyXG4vLyAgICAgcHVibGljIEVuZW15RGF0YWJhc2U6SlNPTlxyXG4vLyAgICAgcHVibGljIFRpbWVUYWJsZTpTdHJ1Yy5Qb2ludGVyTGlzdDx0aW1lTm9kZT5cclxuXHJcbi8vICAgICBwcml2YXRlIHRpbWU6bnVtYmVyXHJcblxyXG5cclxuXHJcbi8vICAgICAvLyBwdWJsaWMgZnJhbWVMb29wOkxheWEudGltZXJcclxuLy8gICAgIGNvbnN0cnVjdG9yKCl7XHJcbi8vICAgICAgICAgc3VwZXIoKVxyXG4gICAgICAgIFxyXG4vLyAgICAgICAgIHRoaXNcclxuLy8gICAgICAgICBMYXlhLmxvYWRlci5sb2FkKFtnYW1lU2V0X2pzb24sIGVuZW15RGF0YWJhc2VdLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHRoaXMub25Mb2FkZWQpLG51bGwsTGF5YS5Mb2FkZXIuSlNPTilcclxuLy8gICAgICAgICAvL+WKoOi9veaVjOS6uuaVsOaNruW6k1xyXG4vLyAgICAgICAgIC8v5Yqg6L295Zyw5Zu+ICBcclxuICAgICAgICBcclxuLy8gICAgIH1cclxuXHJcbi8vICAgICBwcml2YXRlIG9uTG9hZGVkKCl7Ly/liqDovb3lrozmiJDlkI7miafooYzmraTlh73mlbBcclxuXHJcbi8vICAgICAgICAgdGhpcy5HYW1lU2V0ID0gTGF5YS5sb2FkZXIuZ2V0UmVzKGdhbWVTZXRfanNvbikvL+iOt+WPluW3suWKoOi9veeahOWcsOWbvlxyXG4vLyAgICAgICAgIHRoaXMuRW5lbXlEYXRhYmFzZSA9IExheWEubG9hZGVyLmdldFJlcyhlbmVteURhdGFiYXNlKS8v6I635Y+W5bey5Yqg6L2955qE5pWM5Lq65pWw5o2uXHJcbi8vICAgICAgICAgdGhpcy5pbml0VGltZVRhYmxlKCkvL+S7juWcsOWbvuaVsOaNruS4reWKoOi9veaXtumXtOihqFxyXG4vLyAgICAgICAgIHRoaXMudGltZSA9IDAvL+WwhuaXtumXtOiuvuS4ujA75pe26Ze05Y2V5L2N5Li65binXHJcbi8vICAgICAgICAgdGhpcy5ncmlkcyA9IG5ldyBHcmlkcyh0aGlzLlVJU2V0LHRoaXMsdGhpcy5HYW1lU2V0KS8v5L6d5o2u5bey5Yqg6L2955qE5Zyw5Zu+5pWw5o2u77yM6K6+572u5Zyw5Zu+XHJcbi8vICAgICAgICAgdGhpcy5kb2N0b3IgPSBuZXcgRG9jdG9yKCkvL+WIneWni+WMluWIgOWuouS7luWvueixoVxyXG4vLyAgICAgICAgIHRoaXMua2V5Qm9hcmRFdmVudFNldHVwKCkvL+WIneWni+WMlumUruebmOS6i+S7tlxyXG4vLyAgICAgICAgIC8qKua1i+ivleS7o+eggSAqL1xyXG4vLyAgICAgICAgIC8vIHRoaXMuZW5lbWllcy5wdXNoKG5ldyBFbmVteSh0aGlzLlVJU2V0LCB0aGlzLCBcImJ1ZzBcIiwgW10pKVxyXG4vLyAgICAgICAgIC8qKua1i+ivleS7o+eggUVuZCAqL1xyXG5cclxuLy8gICAgICAgICBMYXlhLnRpbWVyLmxvb3AoMjAsdGhpcyx0aGlzLmZyYW1lTG9vcCkvL+W8gOWQr+a4uOaIj+W4p+W+queOr1xyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIHByaXZhdGUgaW5pdFRpbWVUYWJsZSgpe1xyXG4vLyAgICAgICAgIHRoaXMuVGltZVRhYmxlID0gbmV3IFN0cnVjLlBvaW50ZXJMaXN0PHRpbWVOb2RlPigpXHJcbi8vICAgICAgICAgY29uc3QgcmF3VGFibGU6QXJyYXk8YW55PiA9IHRoaXMuR2FtZVNldFtcInRpbWV0YWJsZVwiXVxyXG4vLyAgICAgICAgIHJhd1RhYmxlLmZvckVhY2goKGVsZSk9PntcclxuLy8gICAgICAgICAgICAgdGhpcy5UaW1lVGFibGUucHVzaCh7XHJcbi8vICAgICAgICAgICAgICAgICB0aW1lOmVsZS50aW1lLFxyXG4vLyAgICAgICAgICAgICAgICAgdHlwZTp0aGlzLkVuZW15RGF0YWJhc2VbZWxlLnR5cGVdLFxyXG4vLyAgICAgICAgICAgICAgICAgcGF0aDp0aGlzLkdhbWVTZXRbXCJwYXRoc1wiXVtlbGUucGF0aF1cclxuLy8gICAgICAgICAgICAgfSlcclxuLy8gICAgICAgICB9KVxyXG4vLyAgICAgICAgIGxvZyh0aGlzLlRpbWVUYWJsZSlcclxuLy8gICAgIH1cclxuXHJcbi8vICAgICBwcml2YXRlIGtleUJvYXJkRXZlbnRTZXR1cCgpe1xyXG4vLyAgICAgICAgIHRoaXMub25LZXlkb3duID0gKGU6TGF5YS5FdmVudCkgPT4ge1xyXG4vLyAgICAgICAgICAgICAvKirmtYvor5Xku6PnoIEgKi9cclxuLy8gICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gTGF5YS5LZXlib2FyZC5FKSB7XHJcbi8vICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmVuZW1pZXMpXHJcbi8vICAgICAgICAgICAgIH1cclxuLy8gICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gTGF5YS5LZXlib2FyZC5GKSB7XHJcbi8vICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmVuZW1pZXNbMF0pXHJcbi8vICAgICAgICAgICAgIH1cclxuLy8gICAgICAgICAgICAgLyoq5rWL6K+V5Luj56CBRW5kICovXHJcbi8vICAgICAgICAgfVxyXG4vLyAgICAgICAgIExheWEuc3RhZ2Uub24oTGF5YS5FdmVudC5LRVlfRE9XTix0aGlzLHRoaXMub25LZXlkb3duKVxyXG4vLyAgICAgfVxyXG5cclxuXHJcbi8vICAgICBwdWJsaWMgZnJhbWVMb29wKCl7Ly/mr4/luKfpg73kvJrmiafooYznmoTku6PnoIHlnZdcclxuLy8gICAgICAgICBpZiAodGhpcy5UaW1lVGFibGUucmVhZCgpICYmIHRoaXMudGltZSA9PT0gdGhpcy5UaW1lVGFibGUucmVhZCgpLnRpbWUpIHtcclxuLy8gICAgICAgICAgICAgdGhpcy5lbmVtaWVzLnB1c2gobmV3IEVuZW15KHRoaXMuVUlTZXQsdGhpcyxcclxuLy8gICAgICAgICAgICAgICAgIHRoaXMuVGltZVRhYmxlLnJlYWQoKS50eXBlLFxyXG4vLyAgICAgICAgICAgICAgICAgdGhpcy5UaW1lVGFibGUucmVhZCgpLnBhdGgpKVxyXG4vLyAgICAgICAgICAgICB0aGlzLlRpbWVUYWJsZS5zdGVwKClcclxuLy8gICAgICAgICB9XHJcblxyXG5cclxuLy8gICAgICAgICB0aGlzLm9wZXJhdG9ycy5mb3JFYWNoKChlbGUpPT57Ly/miafooYzmiYDmnInlubLlkZjlr7nosaHnmoR1cGRhdGXmlrnms5VcclxuLy8gICAgICAgICAgICAgZWxlLnVwZGF0ZSgpXHJcbiAgICAgICAgICAgIFxyXG4vLyAgICAgICAgIH0pXHJcbi8vICAgICAgICAgdGhpcy5lbmVtaWVzLmZvckVhY2goKGVsZSk9PnsvL+aJp+ihjOaJgOacieaVjOS6uuWvueixoeeahHVwZGF0ZeaWueazlVxyXG4vLyAgICAgICAgICAgICBlbGUudXBkYXRlKClcclxuLy8gICAgICAgICB9KVxyXG4vLyAgICAgICAgIHRoaXMudGltZSArK1xyXG4vLyAgICAgfVxyXG5cclxuXHJcblxyXG4vLyAgICAgYWRkT3BlcmF0b3IocGxhY2U6bnVtYmVyW10pey8v5Zyo5Zyw5Zu+5LiK5re75Yqg5bmy5ZGYXHJcbi8vICAgICAgICAgLy/mraTmlrnms5XooqvkvZzkuLrlm57osIPlh73mlbDmj5Dkvpvnu5l0aGlzLmdyaWRz5a+56LGh77yM5Zyo54K55Ye75Zyw5Zu+56m65qC85pe25omn6KGMXHJcblxyXG4vLyAgICAgICAgIHRoaXMub3BlcmF0b3JzLnB1c2gobmV3IE9wZXJhdG9yKHRoaXMscGxhY2UpKVxyXG4gICAgICAgIFxyXG4vLyAgICAgfVxyXG5cclxuLy8gfSIsImltcG9ydCB7dWl9IGZyb20gXCIuLi91aS9sYXlhTWF4VUlcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTG9hZGluZyBleHRlbmRzIHVpLkxvYWRpbmdTY2VuZVVJe1xyXG4gICAgY29uc3RydWN0b3IoKXtcclxuICAgICAgICBzdXBlcigpXHJcbiAgICAgICAgY29uc3QgZ2FtZVNldDpzdHJpbmcgPSBcIi4vRGF0YWJhc2UvR2FtZVNldC5qc29uXCIsXHJcbiAgICAgICAgZW5lbXlEYXRhYmFzZTpzdHJpbmcgPSBcIi4vRGF0YWJhc2UvRW5lbXlEYXRhYmFzZS5qc29uXCIsXHJcbiAgICAgICAgb3BlcmF0b3JEYXRhYmFzZTpzdHJpbmcgPSBcIi4vRGF0YWJhc2UvT3BlcmF0b3JEYXRhYmFzZS5qc29uXCJcclxuICAgICAgICBMYXlhLmxvYWRlci5sb2FkKFtnYW1lU2V0LGVuZW15RGF0YWJhc2Usb3BlcmF0b3JEYXRhYmFzZV0sTGF5YS5IYW5kbGVyLmNyZWF0ZSh0aGlzLCB0aGlzLm9uTG9hZGVkKSxudWxsLExheWEuTG9hZGVyLkpTT04pXHJcbiAgICB9XHJcblxyXG4gICAgb25Mb2FkZWQoKXtcclxuICAgICAgICBMYXlhLlNjZW5lLm9wZW4oXCJHYW1lRmllbGRTY2VuZS5zY2VuZVwiKVxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKExheWEubG9hZGVyKVxyXG4gICAgfVxyXG59IiwiLyoqVGhpcyBjbGFzcyBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBieSBMYXlhQWlySURFLCBwbGVhc2UgZG8gbm90IG1ha2UgYW55IG1vZGlmaWNhdGlvbnMuICovXG5pbXBvcnQgVmlldz1MYXlhLlZpZXc7XHJcbmltcG9ydCBEaWFsb2c9TGF5YS5EaWFsb2c7XHJcbmltcG9ydCBTY2VuZT1MYXlhLlNjZW5lO1xudmFyIFJFRzogRnVuY3Rpb24gPSBMYXlhLkNsYXNzVXRpbHMucmVnQ2xhc3M7XG5leHBvcnQgbW9kdWxlIHVpIHtcclxuICAgIGV4cG9ydCBjbGFzcyBHYW1lRmllbGRTY2VuZVVJIGV4dGVuZHMgU2NlbmUge1xyXG5cdFx0cHVibGljIFVJU2V0OkxheWEuU3ByaXRlO1xuICAgICAgICBjb25zdHJ1Y3RvcigpeyBzdXBlcigpfVxyXG4gICAgICAgIGNyZWF0ZUNoaWxkcmVuKCk6dm9pZCB7XHJcbiAgICAgICAgICAgIHN1cGVyLmNyZWF0ZUNoaWxkcmVuKCk7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZFNjZW5lKFwiR2FtZUZpZWxkU2NlbmVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgUkVHKFwidWkuR2FtZUZpZWxkU2NlbmVVSVwiLEdhbWVGaWVsZFNjZW5lVUkpO1xyXG4gICAgZXhwb3J0IGNsYXNzIExvYWRpbmdTY2VuZVVJIGV4dGVuZHMgU2NlbmUge1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKCl7IHN1cGVyKCl9XHJcbiAgICAgICAgY3JlYXRlQ2hpbGRyZW4oKTp2b2lkIHtcclxuICAgICAgICAgICAgc3VwZXIuY3JlYXRlQ2hpbGRyZW4oKTtcclxuICAgICAgICAgICAgdGhpcy5sb2FkU2NlbmUoXCJMb2FkaW5nU2NlbmVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgUkVHKFwidWkuTG9hZGluZ1NjZW5lVUlcIixMb2FkaW5nU2NlbmVVSSk7XHJcbn1cciJdfQ==
